/*! For license information please see sw.js.LICENSE.txt */
(()=>{var e,t,n,r,i={85:(e,t,n)=>{"use strict";n.d(t,{kG:()=>s});var r=n(51);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(){o=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),s=new P(r||[]);return a(o,"_invoke",{value:N(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",v="suspendedYield",g="executing",y="completed",b={};function m(){}function w(){}function _(){}var E={};l(E,u,(function(){return this}));var S=Object.getPrototypeOf,O=S&&S(S(C([])));O&&O!==n&&r.call(O,u)&&(E=O);var T=_.prototype=m.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,s,u){var c=h(e[o],e,a);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==i(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(l).then((function(e){f.value=e,s(f)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function N(t,n,r){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=R(s,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function R(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return w.prototype=_,a(T,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,f,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},A(x.prototype),l(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(T),l(T,f,"Generator"),l(T,u,(function(){return this})),l(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function a(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return u.apply(this,arguments)}function u(){return(e=o().mark((function e(t){var n,a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,chrome.storage.local.get(r.d.disableCollectEmails);case 4:if(!(n=e.sent)[r.d.disableCollectEmails]){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,chrome.storage.local.get(r.d.storedEmails);case 9:for(n=e.sent,a=[],n[r.d.storedEmails]&&(a=n[r.d.storedEmails]),s=0;s<t.length;s++)u=t[s],a.indexOf(u)<0&&a.push(u);chrome.storage.local.set((o={},c=r.d.storedEmails,f=a,(c=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(c))in o?Object.defineProperty(o,c,{value:f,enumerable:!0,configurable:!0,writable:!0}):o[c]=f,o));case 14:case"end":return e.stop()}var o,c,f}),e)})),u=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)}))}).apply(this,arguments);var e}},51:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{d:()=>a});var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object.freeze({storedEmails:"storedEmails",disableCollectEmails:"disableCollectEmails",donateButtonNumber:"donateButtonNumber",userAgreed:"userAgreed",userAgreedV2:"userAgreedV2",userAgreedV3:"userAgreedV3",mellowtelEnabled:"mellowtelEnabled",safeCheckerEnabled:"safeCheckerEnabled"}))},518:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){s=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:N(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",v="suspendedYield",g="executing",y="completed",b={};function m(){}function w(){}function _(){}var E={};l(E,u,(function(){return this}));var S=Object.getPrototypeOf,O=S&&S(S(C([])));O&&O!==n&&i.call(O,u)&&(E=O);var T=_.prototype=m.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,s,u){var c=h(e[o],e,a);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==r(l)&&i.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(l).then((function(e){f.value=e,s(f)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function N(t,n,r){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=R(s,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function R(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(i.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=_,o(T,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,f,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},A(x.prototype),l(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(T),l(T,f,"Generator"),l(T,u,(function(){return this})),l(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function u(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{A:()=>d});const d=new(function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.debug=t},t=[{key:"getOrCreateClientId",value:(u=c(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get("clientId");case 2:if(t=e.sent,n=t.clientId){e.next=8;break}return n=self.crypto.randomUUID(),e.next=8,chrome.storage.local.set({clientId:n});case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"getOrCreateSessionId",value:(a=c(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.session.get("sessionData");case 2:if(t=e.sent,n=t.sessionData,r=Date.now(),!n||!n.timestamp){e.next=14;break}if(!((r-n.timestamp)/6e4>30)){e.next=11;break}n=null,e.next=14;break;case 11:return n.timestamp=r,e.next=14,chrome.storage.session.set({sessionData:n});case 14:if(n){e.next=18;break}return n={session_id:r.toString(),timestamp:r.toString()},e.next=18,chrome.storage.session.set({sessionData:n});case 18:return e.abrupt("return",n.session_id);case 19:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"fireEvent",value:(i=c(s().mark((function e(t){var n,r,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=i.length>1&&void 0!==i[1]?i[1]:{}).session_id){e.next=5;break}return e.next=4,this.getOrCreateSessionId();case 4:n.session_id=e.sent;case 5:return n.engagement_time_msec||(n.engagement_time_msec=100),e.prev=6,e.t0=fetch,e.t1="".concat(this.debug?"https://www.google-analytics.com/debug/mp/collect":"https://www.google-analytics.com/mp/collect","?measurement_id=").concat("G-HTSDC0G4R6","&api_secret=").concat("jzFkwG6xRPCMgjBsOd1X6Q"),e.t2=JSON,e.next=12,this.getOrCreateClientId();case 12:return e.t3=e.sent,e.t4=[{name:t,params:n}],e.t5={client_id:e.t3,events:e.t4},e.t6=e.t2.stringify.call(e.t2,e.t5),e.t7={method:"POST",body:e.t6},e.next=19,(0,e.t0)(e.t1,e.t7);case 19:if(r=e.sent,this.debug){e.next=22;break}return e.abrupt("return");case 22:return e.t8=console,e.next=25,r.text();case 25:e.t9=e.sent,e.t8.log.call(e.t8,e.t9),e.next=32;break;case 29:e.prev=29,e.t10=e.catch(6),console.error("Google Analytics request failed with an exception",e.t10);case 32:case"end":return e.stop()}}),e,this,[[6,29]])}))),function(e){return i.apply(this,arguments)})},{key:"firePageViewEvent",value:(r=c(s().mark((function e(t,n){var r,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.abrupt("return",this.fireEvent("page_view",o({page_title:t,page_location:n},r)));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"fireErrorEvent",value:(n=c(s().mark((function e(t){var n,r=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",this.fireEvent("extension_error",o(o({},t),n)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],t&&f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,i,a,u}())},375:()=>{function e(e){return function(e){if(Array.isArray(e))return s(e)}(e)||r(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return i(e)||r(e)||a(e)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function i(e){if(Array.isArray(e))return e}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(){"use strict";c=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",f=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:N(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",v="suspendedYield",g="executing",y="completed",b={};function m(){}function w(){}function _(){}var E={};l(E,a,(function(){return this}));var S=Object.getPrototypeOf,O=S&&S(S(C([])));O&&O!==n&&r.call(O,a)&&(E=O);var T=_.prototype=m.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,a,s){var c=h(e[i],e,o);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==u(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){f.value=e,a(f)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function N(t,n,r){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=R(s,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function R(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(u(t)+" is not iterable")}return w.prototype=_,i(T,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,f,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},A(x.prototype),l(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(T),l(T,f,"Generator"),l(T,a,(function(){return this})),l(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){h(o,r,i,a,s,"next",e)}function s(e){h(o,r,i,a,s,"throw",e)}a(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function y(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}!function(){var r={4991:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(910),t)},910:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorageAdapter=t.SessionStorage=void 0;var n="__SESSION_STORAGE__",r=function(){return y((function e(){var t=this;v(this,e),this.storage=chrome.storage.local,chrome.runtime.onStartup.addListener((function(){t.clear()}))}),[{key:"get",value:(s=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionStorageEmpty();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",{});case 4:if(n=void 0===t,r=Array.isArray(t),!n){e.next=9;break}return e.next=8,this.sessionStorage();case 8:return e.abrupt("return",e.sent);case 9:return e.next=11,this.sessionStorage();case 11:return i=e.sent,e.abrupt("return",r?t.reduce((function(e,t){return l(l({},e),i.hasOwnProperty(t)&&d({},t,i[t]))}),{}):l({},i.hasOwnProperty(t)&&d({},t,i[t])));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"set",value:(a=p(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionStorageEmpty();case 2:if(!e.sent){e.next=6;break}return e.next=5,this.storage.set(d({},n,t));case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,this.sessionStorage();case 8:return r=e.sent,e.next=11,this.storage.set(d({},n,l(l({},r),t)));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"has",value:(o=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionStorageEmpty();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,this.sessionStorage();case 6:return n=e.sent,e.abrupt("return",Boolean(n[t]));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"remove",value:(i=p(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionStorageEmpty();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.sessionStorage();case 6:return r=e.sent,(Array.isArray(t)?t:[t]).forEach((function(e){delete r[e]})),e.next=10,this.storage.set(d({},n,r));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"clear",value:(r=p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.set(d({},n,{}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"sessionStorage",value:(t=p(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.t1={},e.next=4,this.storage.get(n);case 4:if(e.t3=n,e.t4=t=e.sent[e.t3],e.t2=null!==e.t4,!e.t2){e.next=9;break}e.t2=void 0!==t;case 9:if(!e.t2){e.next=13;break}e.t5=t,e.next=14;break;case 13:e.t5={};case 14:return e.t6=e.t5,e.abrupt("return",(0,e.t0)(e.t1,e.t6));case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"sessionStorageEmpty",value:(e=p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.next=3,this.sessionStorage();case 3:return e.t1=e.sent,e.t2=e.t0.keys.call(e.t0,e.t1).length,e.abrupt("return",0===e.t2);case 6:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t,r,i,o,a,s}();t.SessionStorage=r,t.SessionStorageAdapter=function(){return y((function e(){v(this,e)}),null,[{key:"adapt",value:function(){chrome.storage.session||(chrome.storage.session=new r)}}])}()},3436:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BgPayloadBuilder=void 0;var i=n(6700),o=n(5072),a=function(){return y((function e(){v(this,e),this.server={}}),[{key:"withUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.url={value:e,encoded:t},this}},{key:"withTimestamp",value:function(e){return this.timestamp=e,this}},{key:"withPageAttributes",value:function(e,t){return this.pageAttrs={title:e,name:t},this}},{key:"withContextAttributes",value:function(e){return this.contextAttrs={referrer:e},this}},{key:"withRequestTab",value:function(e,t){return this.requestTab={id:e,initiatorId:t},this}},{key:"withFrame",value:function(e,t){return this.frame={id:e,parentId:t},this}},{key:"withOS",value:function(e,t){return this.os={name:e,version:t},this}},{key:"withBrowser",value:function(e,t){return this.browser={name:e,version:t},this}},{key:"withHttpRequest",value:function(e,t){return this.request={headers:t,method:e},this}},{key:"withHttpResponse",value:function(e){return this.response=e,this}},{key:"withSequence",value:function(e){return this.mainFrame={navigationSequence:e},this}},{key:"withServer",value:function(e){return this.server={api:e},this}},{key:"withEventDef",value:function(e,t,n){return this.eventDef={id:e,type:t,subType:n},this}},{key:"withPanelistDef",value:function(e,t,n,r){return this.panelistDef={panelistId:e,panelId:t,partnerId:n,distributorId:r},this}},{key:"make",value:function(){if(void 0===this.url)throw new Error("BgPayloadBuilder: URL is not specified");if(void 0===this.timestamp)throw new Error("BgPayloadBuilder: timestamp is not specified");if(void 0===this.pageAttrs)throw new Error("BgPayloadBuilder: pageAttributes is not specified");if(void 0===this.contextAttrs)throw new Error("BgPayloadBuilder: contextAttributes is not specified");if(void 0===this.requestTab)throw new Error("BgPayloadBuilder: requestTab is not specified");if(void 0===this.frame)throw new Error("BgPayloadBuilder: frame is not specified");if(void 0===this.os)throw new Error("BgPayloadBuilder: OS is not specified");if(void 0===this.mainFrame)throw new Error("BgPayloadBuilder: mainFrame is not specified");if(void 0===this.panelistDef)throw new Error("BgPayloadBuilder: panelistDef is not specified");if(void 0===this.browser)throw new Error("BgPayloadBuilder: browser is not specified");if(void 0===this.eventDef)throw new Error("BgPayloadBuilder: eventDef is not specified");if(void 0===this.request)throw new Error("BgPayloadBuilder: request is not specified");if(void 0===this.response)throw new Error("BgPayloadBuilder: response is not specified");if(void 0===this.server)throw new Error("BgPayloadBuilder: server is not specified");var e={url:this.url,timestamp:this.timestamp,pageAttributes:this.pageAttrs,contextAttributes:this.contextAttrs,method:o.RequestMethod.REQUEST,tab:this.requestTab,frame:this.frame,os:this.os,server:this.server,mainFrame:this.mainFrame,browser:this.browser,request:this.request,response:this.response,eventDef:this.eventDef,partition:o.Partition.BG,type:"INTERNAL_BROWSER_EXTENSION",panelistDef:this.panelistDef};return this.reset(),e}},{key:"reset",value:function(){return this.url=void 0,this.timestamp=void 0,this.pageAttrs=void 0,this.contextAttrs=void 0,this.requestTab=void 0,this.frame=void 0,this.os=void 0,this.mainFrame=void 0,this.panelistDef=void 0,this.eventDef=void 0,this.request=void 0,this.browser=void 0,this.server={},this.response=void 0,this}}])}();a=r([(0,i.injectable)()],a),t.BgPayloadBuilder=a},3003:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.FgPayloadBuilder=void 0;var i=n(6700),o=n(5072),a=function(){return y((function e(){v(this,e),this.bgNavigations=[]}),[{key:"withLibVersion",value:function(e){return this.libVersion=e,this}},{key:"withUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.url={value:e,encoded:t},this}},{key:"withTimestamp",value:function(e){return this.timestamp=e,this}},{key:"withPageAttributes",value:function(e,t){return this.pageAttrs={title:e,name:t},this}},{key:"withContextAttributes",value:function(e){return this.contextAttrs={referrer:e},this}},{key:"withMethod",value:function(e){return this.method=e,this}},{key:"withRequestTab",value:function(e,t){return this.requestTab={id:e,initiatorId:t},this}},{key:"withFrame",value:function(e,t){return this.frame={id:e,parentId:t},this}},{key:"withOS",value:function(e,t){return this.os={name:e,version:t},this}},{key:"withMainFrame",value:function(e){return this.mainFrame={navigationSequence:e},this}},{key:"addBgNavigation",value:function(e){return this.bgNavigations.push(e),this}},{key:"withPanelistDef",value:function(e,t,n,r){return this.panelistDef={panelistId:e,panelId:t,partnerId:n,distributorId:r},this}},{key:"make",value:function(){if(void 0===this.url)throw new Error("FgPayloadBuilder: URL is not specified");if(void 0===this.timestamp)throw new Error("FgPayloadBuilder: timestamp is not specified");if(void 0===this.pageAttrs)throw new Error("FgPayloadBuilder: pageAttributes is not specified");if(void 0===this.contextAttrs)throw new Error("FgPayloadBuilder: contextAttributes is not specified");if(void 0===this.method)throw new Error("FgPayloadBuilder: method is not specified");if(void 0===this.requestTab)throw new Error("FgPayloadBuilder: requestTab is not specified");if(void 0===this.frame)throw new Error("FgPayloadBuilder: frame is not specified");if(void 0===this.os)throw new Error("FgPayloadBuilder: OS is not specified");if(void 0===this.mainFrame)throw new Error("FgPayloadBuilder: mainFrame is not specified");if(void 0===this.panelistDef)throw new Error("FgPayloadBuilder: panelistDef is not specified");var e={libVersion:this.libVersion,url:this.url,timestamp:this.timestamp,pageAttributes:this.pageAttrs,contextAttributes:this.contextAttrs,method:this.method,tab:this.requestTab,frame:this.frame,os:this.os,mainFrame:this.mainFrame,type:"INTERNAL_BROWSER_EXTENSION",partition:o.Partition.FG,nested:this.bgNavigations,panelistDef:this.panelistDef};return this.reset(),e}},{key:"reset",value:function(){return this.url=void 0,this.timestamp=void 0,this.pageAttrs=void 0,this.contextAttrs=void 0,this.method=void 0,this.requestTab=void 0,this.frame=void 0,this.os=void 0,this.mainFrame=void 0,this.bgNavigations=[],this.panelistDef=void 0,this}}])}();a=r([(0,i.injectable)()],a),t.FgPayloadBuilder=a},6657:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpResponseBuilder=void 0;var i=n(6700),o=function(){return y((function e(){v(this,e)}),[{key:"addHeaders",value:function(e,t){return void 0===this.headers&&(this.headers=[]),this.headers.push({name:e,value:t}),this}},{key:"withStatusCode",value:function(e){return this.statusCode=e,this}},{key:"withStatusLine",value:function(e){return this.statusLine=e,this}},{key:"withFromCache",value:function(e){return this.isFromCache=e,this}},{key:"withRedirectUrl",value:function(e){return this.redirectUrl=e,this}},{key:"withError",value:function(e){return this.error=e,this}},{key:"make",value:function(){var e={headers:this.headers,isFromCache:this.isFromCache,redirectUrl:this.redirectUrl,statusCode:this.statusCode,statusLine:this.statusLine,error:this.error};return this.reset(),e}},{key:"reset",value:function(){return this.headers=void 0,this.statusCode=void 0,this.statusLine=void 0,this.isFromCache=void 0,this.redirectUrl=void 0,this.error=void 0,this}}])}();o=r([(0,i.injectable)()],o),t.HttpResponseBuilder=o},647:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationMethod=t.NavigationStatus=void 0,(r=t.NavigationStatus||(t.NavigationStatus={})).INITIAL="INITIAL",r.SUCCESS="SUCCESS",r.FAILED="FAILED",r.LOADING="LOADING",(n=t.NavigationMethod||(t.NavigationMethod={})).INITIAL="initial",n.HTTP_REQUEST="request",n.URL_REWRITE="url_rewrite"},6074:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Compressor=void 0;var i=n(6700),o=n(5708),a=function(){return y((function e(){v(this,e)}),[{key:"compress",value:function(e){return o.default.compressToUTF16(e)}},{key:"decompress",value:function(e){return o.default.decompressFromUTF16(e)}}])}();a=r([(0,i.injectable)()],a),t.Compressor=a},1749:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRealTabOnly=t.mainFrameOnly=t.libEnabled=t.allowedUrlsOnly=t.notPrerender=void 0;var r=n(3740);t.notPrerender=function(){return function(e,t,n){var i=n.value;n.value=function(e){(0,r.isPrerender)(e.documentLifecycle)||i.apply(this,arguments)}}},t.allowedUrlsOnly=function(){return function(e,t,n){var i=n.value;n.value=function(e){(0,r.isAllowedUrl)(e.url)&&i.apply(this,arguments)}}},t.libEnabled=function(){return function(e,t,n){var r=n.value;n.value=function(e){globalThis[Symbol.for("__URL_SAFE_CHECK_OPTIONS__")].enabled&&r.apply(this,arguments)}}},t.mainFrameOnly=function(){return function(e,t,n){var i=n.value;n.value=function(e){(0,r.isMainFrame)(e.frameId)&&i.apply(this,arguments)}}},t.isRealTabOnly=function(){return function(e,t,n){var i=n.value;n.value=function(e){(0,r.isRealTab)(e.tabId)&&i.apply(this,arguments)}}}},7809:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DiTypes=void 0,(n=t.DiTypes||(t.DiTypes={})).TASK_MANAGER="TASK_MANAGER",n.HTTP_CLIENT="HTTP_CLIENT",n.OPTIONS="OPTIONS",n.ENV="ENV",n.STREAM_MANAGER="STREAM_MANAGER",n.SCRIPT_MANAGER="SCRIPT_MANAGER",n.LOGGER="LOGGER",n.DISPATCHER="DISPATCHER",n.DI="DI",n.COMPRESSOR="COMPRESSOR",n.SENSITIVE_DATA_FILTER="SENSITIVE_DATA_FILTER",n.HTTP_RESPONSE_BUILDER="HTTP_RESPONSE_BUILDER",n.CHECK_SAFETY_SERVICE="CHECK_SAFETY_SERVICE",n.WEB_NAV_STORAGE="WEB_NAV_STORAGE",n.WEB_NAV_PROCESSOR="WEB_NAV_PROCESSOR",n.WEB_NAV_MANAGER="WEB_NAV_MANAGER",n.FG_NAV_MANAGER="FG_NAV_MANAGER",n.FG_PAYLOAD_BUILDER="FG_PAYLOAD_BUILDER",n.FG_NAV_STORAGE="FG_NAV_STORAGE",n.FG_NAV_PROCESSOR="FG_NAV_PROCESSOR",n.BG_PAYLOAD_BUILDER="BG_PAYLOAD_BUILDER",n.BG_NAV_STORAGE="BG_NAV_STORAGE"},3762:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapToRequestMethod=void 0;var r=n(5072),i=n(647);t.mapToRequestMethod=function(e){return d(d(d({},i.NavigationMethod.INITIAL,r.RequestMethod.REQUEST),i.NavigationMethod.HTTP_REQUEST,r.RequestMethod.REQUEST),i.NavigationMethod.URL_REWRITE,r.RequestMethod.URL_REWRITE)[e]}},9696:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSafetyService=void 0;var a=n(6700),s=n(7809),f=n(8028),l=n(9268),d=n(9362),h=n(1067),g=n(5642),b=n(6958),m=function(){return y((function e(t,n,r,i,o){v(this,e),this.httpClient=t,this.dispatcher=n,this.sensitiveData=r,this.logger=i,this.options=o}),[{key:"check",value:(n=p(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={name:f.EventList.CHECK_URL_SAFETY_RESULT,payload:{tabId:t,safe:g.SafetyStatus.UNKNOWN,url:n.url.value}},e.prev=1,i=this.sensitiveData.filter(n),r.payload.url=i.url.value,"NO_NAVIGATION"!==this.options.mode){e.next=10;break}return e.next=7,this.basic(i);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,this.full(i);case 12:e.t0=e.sent;case 13:o=e.t0,r.payload.safe=o.safe?g.SafetyStatus.SAFE:g.SafetyStatus.UNSAFE,e.next=20;break;case 17:e.prev=17,e.t1=e.catch(1),this.logger.warn("CheckSafetyService: could not check an url ".concat(n.url.value));case 20:return e.next=22,this.dispatcher.emit(r);case 22:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(e,t){return n.apply(this,arguments)})},{key:"full",value:(t=p(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.httpClient.full(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"basic",value:(e=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:t.url},e.next=3,this.httpClient.basic(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e,t,n}();m=r([(0,a.injectable)(),o(0,(0,a.inject)(s.DiTypes.HTTP_CLIENT)),o(1,(0,a.inject)(s.DiTypes.DISPATCHER)),o(2,(0,a.inject)(s.DiTypes.SENSITIVE_DATA_FILTER)),o(3,(0,a.inject)(s.DiTypes.LOGGER)),o(4,(0,a.inject)(s.DiTypes.OPTIONS)),i("design:paramtypes",[l.HttpClient,d.Dispatcher,h.SensitiveDataFilter,b.Logger,Object])],m),t.CheckSafetyService=m},5642:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SafetyStatus=void 0,(n=t.SafetyStatus||(t.SafetyStatus={})).SAFE="SAFE",n.UNSAFE="UNSAFE",n.UNKNOWN="UNKNOWN"},9362:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Dispatcher=void 0;var s=n(6700),f=n(7809),l=function(){return y((function e(t){v(this,e),this.di=t,this.listeners=new Map}),[{key:"emit",value:(e=p(c().mark((function e(t){var n,r,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.di.get(f.DiTypes.LOGGER).detailed("Dispatcher - emit",{eventName:t.name},(function(){return t})),this.listeners.has(t.name)){e.next=2;break}return e.abrupt("return");case 2:n=this.listeners.get(t.name),r=o(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=12;break}return a=i.value,e.next=10,a(t);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])}))),function(t){return e.apply(this,arguments)})},{key:"listen",value:function(e,t){this.listeners.has(e)||this.listeners.set(e,[]);var n=this.listeners.get(e);n.push(t),this.listeners.set(e,n)}}]);var e}();l=r([(0,s.injectable)(),a(0,(0,s.inject)(f.DiTypes.DI)),i("design:paramtypes",[s.Container])],l),t.Dispatcher=l},8028:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EventList=void 0,(n=t.EventList||(t.EventList={})).WEB_NAV_CREATED="WEB_NAV_CREATED",n.FG_NAV_COMPLETED="FG_NAV_COMPLETED",n.CHECK_URL_SAFETY_RESULT="CHECK_URL_SAFETY_RESULT"},4972:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Env=void 0;var i=n(6700),o=n(8258),a=n(7327),s=function(){return y((function e(){v(this,e)}),[{key:"getOS",value:function(){return null==this.os&&(this.os=(0,o.getOsVersionIgnoreLinter)()),this.os}},{key:"getBrowser",value:function(){return null==this.browser&&(this.browser=(0,a.getBrowserVersionIgnoreLinter)()),this.browser}}])}();s=r([(0,i.injectable)()],s),t.Env=s},6478:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FgNavManager=void 0;var a=n(6700),s=n(7809),f=n(9362),d=n(9575),h=n(3740),g=n(8028),b=n(855),m=n(8624),w=n(647),_=function(){return y((function e(t,n,r,i){v(this,e),this.storage=t,this.dispatcher=n,this.fgNavStorage=r,this.script=i}),[{key:"historyStateUpdated",value:(b=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fgNavStorage.getOrCreate(t.tabId);case 2:if(n=e.sent,e.t0=n.url!==t.url,!e.t0){e.next=16;break}if(e.t1=n.status===w.NavigationStatus.LOADING,!e.t1){e.next=9;break}return e.next=9,this.finalize(n,w.NavigationStatus.SUCCESS);case 9:return n.method=w.NavigationMethod.URL_REWRITE,n.status=w.NavigationStatus.LOADING,n.url=t.url,e.next=14,(0,h.delay)(1500);case 14:return e.next=16,this.finalize(n,w.NavigationStatus.SUCCESS);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"webNavigationBeforeNavigate",value:(d=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fgNavStorage.getOrCreate(t.tabId);case 2:if(n=e.sent,e.t0=n.url===t.url&&n.status===w.NavigationStatus.FAILED,e.t0){e.next=10;break}return n.status=w.NavigationStatus.LOADING,n.method=w.NavigationMethod.HTTP_REQUEST,n.url=t.url,e.next=10,this.fgNavStorage.save(n);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"webNavigationComplete",value:(f=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fgNavStorage.getOrCreate(t.tabId);case 2:if(n=e.sent,e.t0=n.status!==w.NavigationStatus.SUCCESS,!e.t0){e.next=8;break}return n.url=t.url,e.next=8,this.finalize(n,w.NavigationStatus.SUCCESS);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"webNavigationErrorOccurred",value:(u=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fgNavStorage.getOrCreate(t.tabId);case 2:if(n=e.sent,e.t0=n.url===t.url&&n.status===w.NavigationStatus.FAILED,e.t0){e.next=8;break}return n.url=t.url,e.next=8,this.finalize(n,w.NavigationStatus.FAILED);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"webRequestHeadersSent",value:(s=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.getOrCreate(t.tabId,t.frameId);case 2:return(n=e.sent).webRequestHeadersSent=t,e.next=6,this.storage.save(n,t.frameId);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"webRequestHeadersReceived",value:(a=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.getOrCreate(t.tabId,t.frameId);case 2:return(n=e.sent).webRequestHeadersReceived=t,e.next=6,this.storage.save(n,t.frameId);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"webRequestBeforeRedirect",value:(o=p(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.getOrCreate(t.tabId,t.frameId);case 2:return(n=e.sent).webRequestBeforeRedirect=t,n.timestamp=Date.now(),e.next=7,this.getInitiatorTabId(t.tabId);case 7:return n.initiatorTabId=e.sent,e.next=10,this.storage.remove(t.tabId,t.frameId);case 10:return r={name:g.EventList.WEB_NAV_CREATED,payload:n},e.next=13,this.dispatcher.emit(r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getInitiatorTabId",value:(i=p(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fgNavStorage.getOrCreate(t);case 2:return e.abrupt("return",e.sent.initiatorTabId);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getSequence",value:(r=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fgNavStorage.getOrCreate(t);case 2:return n=e.sent,e.abrupt("return",0===n.sequence?1:n.sequence);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"tabCreated",value:(n=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.fgNavStorage.getOrCreate(t.id);case 4:return(n=e.sent).initiatorTabId=t.openerTabId,e.next=8,this.fgNavStorage.save(n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"createdNavigationTarget",value:(t=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t.tabId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.fgNavStorage.getOrCreate(t.tabId);case 4:return(n=e.sent).initiatorTabId=t.sourceTabId,e.next=8,this.fgNavStorage.save(n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"finalize",value:(e=p(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.timestamp=Date.now(),t.status=n,e.next=4,this.script.getPageData(t.tabId);case 4:return t.pageData=e.sent,t.sequence+=1,r={name:g.EventList.FG_NAV_COMPLETED,payload:l({},t)},e.next=9,this.fgNavStorage.save(t);case 9:return e.next=11,this.storage.remove(t.tabId,0);case 11:return e.next=13,this.dispatcher.emit(r);case 13:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})}]);var e,t,n,r,i,o,a,s,u,f,d,b}();_=r([(0,a.injectable)(),o(0,(0,a.inject)(s.DiTypes.WEB_NAV_STORAGE)),o(1,(0,a.inject)(s.DiTypes.DISPATCHER)),o(2,(0,a.inject)(s.DiTypes.FG_NAV_STORAGE)),o(3,(0,a.inject)(s.DiTypes.SCRIPT_MANAGER)),i("design:paramtypes",[b.WebNavStorage,f.Dispatcher,m.FgNavStorage,d.ScriptManager])],_),t.FgNavManager=_},2620:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FgNavProcessor=void 0;var a=n(6700),s=n(3740),f=n(3762),l=n(7809),d=n(9362),h=n(3003),g=n(4972),b=n(9696),m=n(855),w=n(6797),_=n(8624),E=function(){return y((function e(t,n,r,i,o,a,s,u){v(this,e),this.storage=t,this.dispatcher=n,this.fgNavStorage=r,this.builder=i,this.options=o,this.env=a,this.checkSafety=s,this.bgNavStorage=u}),[{key:"process",value:(e=p(c().mark((function e(t){var n,r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.builder.withLibVersion((0,s.getLibVersion)()).withUrl(t.url).withTimestamp("".concat(t.timestamp)).withMethod((0,f.mapToRequestMethod)(t.method)).withRequestTab(t.tabId,t.initiatorTabId).withFrame(0,-1).withOS(this.env.getOS().name,this.env.getOS().version).withMainFrame(t.sequence).withPanelistDef(this.options.panalyticsId,this.options.pinstanceId,this.options.partnerId,this.options.distributorId).withPageAttributes(t.pageData.title,t.pageData.name).withContextAttributes(t.pageData.referrer),e.next=3,this.bgNavStorage.getAll();case 3:return n=e.sent,e.next=6,this.bgNavStorage.clean();case 6:return n.forEach((function(e){return i.builder.addBgNavigation(e)})),r=this.builder.make(),e.next=10,this.checkSafety.check(t.tabId,r);case 10:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e}();E=r([(0,a.injectable)(),o(0,(0,a.inject)(l.DiTypes.WEB_NAV_STORAGE)),o(1,(0,a.inject)(l.DiTypes.DISPATCHER)),o(2,(0,a.inject)(l.DiTypes.FG_NAV_STORAGE)),o(3,(0,a.inject)(l.DiTypes.FG_PAYLOAD_BUILDER)),o(4,(0,a.inject)(l.DiTypes.OPTIONS)),o(5,(0,a.inject)(l.DiTypes.ENV)),o(6,(0,a.inject)(l.DiTypes.CHECK_SAFETY_SERVICE)),o(7,(0,a.inject)(l.DiTypes.BG_NAV_STORAGE)),i("design:paramtypes",[m.WebNavStorage,d.Dispatcher,_.FgNavStorage,h.FgPayloadBuilder,Object,g.Env,b.CheckSafetyService,w.BgNavStorage])],E),t.FgNavProcessor=E},9268:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;var a=n(6700),s=n(7809),f=n(6958),l=n(6074),d=function(){return y((function e(t,n,r){v(this,e),this.options=t,this.logger=n,this.compressor=r}),[{key:"basic",value:(n=p(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("/secure/urls/checkSafety/basic",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"full",value:(t=p(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("/secure/urls/checkSafety",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"send",value:(e=p(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.detailed("http-client - payload for",{url:n.url.value},(function(){return n})),r=JSON.stringify(n),i=this.options.compressRequest?this.compressor.compress(r):r,o=this.options.compressRequest?"application/octet-stream":"application/json;charset=utf-8",e.next=6,fetch(this.endpoint(t),{method:"POST",body:i,headers:{"Content-Type":o}});case 6:return a=e.sent,e.next=9,a.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"endpoint",value:function(e){return"".concat(this.options.apiUrl).concat(e)}}]);var e,t,n}();d=r([(0,a.injectable)(),o(0,(0,a.inject)(s.DiTypes.OPTIONS)),o(1,(0,a.inject)(s.DiTypes.LOGGER)),o(2,(0,a.inject)(s.DiTypes.COMPRESSOR)),i("design:paramtypes",[Object,f.Logger,l.Compressor])],d),t.HttpClient=d},5072:function(e,t){"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.Partition=t.RequestMethod=t.EventType=void 0,(i=t.EventType||(t.EventType={})).MAIN="main",i.RESOURCE="resource",(r=t.RequestMethod||(t.RequestMethod={})).REQUEST="request",r.URL_REWRITE="url_rewrite",(n=t.Partition||(t.Partition={})).FG="fg",n.BG="bg"},6958:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var a=n(6700),s=n(7809),c=function(){return y((function e(t){v(this,e),this.options=t}),[{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.options.logging&&console.log.apply(console.log,t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.options.logging&&console.warn.apply(console.warn,t)}},{key:"groupCollapsed",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.options.logging&&console.groupCollapsed.apply(console.groupCollapsed,t)}},{key:"groupEnd",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.options.logging&&console.groupEnd.apply(console.groupEnd,t)}},{key:"detailed",value:function(e,t,n){if(this.options.logging){var r="";["tabId","frameId","requestId","eventName"].forEach((function(e){void 0!==t[e]&&(r+="".concat(e,": ").concat(t[e],","))})),r=r.slice(0,-1);var i="[".concat(r,"]: ").concat(e);void 0!==t.url&&(i="".concat(i," ").concat(t.url)),this.groupCollapsed(i);var o=n();"object"==u(o)&&(o=JSON.stringify(o,null,2)),this.log(o),this.groupEnd()}}}])}();c=r([(0,a.injectable)(),o(0,(0,a.inject)(s.DiTypes.OPTIONS)),i("design:paramtypes",[Object])],c),t.Logger=c},9575:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptManager=void 0;var i=n(6700),o=n(3740),a=function(){return y((function e(){v(this,e)}),[{key:"getPageData",value:(e=p(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={target:{tabId:t},func:o.getPageData},e.prev=1,e.next=4,chrome.scripting.executeScript(n);case 4:return e.abrupt("return",e.sent[0].result);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{title:"",name:"",referrer:""});case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(t){return e.apply(this,arguments)})}]);var e}();a=r([(0,i.injectable)()],a),t.ScriptManager=a},1067:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SensitiveDataFilter=void 0;var a=n(6700),s=n(707),f=n(7809),l=n(6958),d=n(3740),h=n(3162),g=function(){return y((function e(t,n){var r=this;v(this,e),this.options=t,this.logger=n;var i={logging:!!t.sensitiveDataFilteringLogging,host:t.sensitiveDataApiUrl};this._filter=new s.default(i),this.logger.log("SensitiveDataFilter - initializing"),this._filter.init().then((function(){return r.logger.log("SensitiveDataFilter - ready")})).catch((function(){return r.logger.warn("SensitiveDataFilter - could not initialize filter")}))}),[{key:"transformUrl",value:function(e){if(!this.options.sensitiveDataCheckEnabled)return e;try{return this._filter.transformUrl(e)}catch(t){return this.logger.warn("SensitiveDataFilter - could not transform url: ".concat(e)),e}}},{key:"transformTitle",value:function(e,t){if(!this.options.sensitiveDataCheckEnabled)return t;try{return this._filter.transformTitle(e,t)}catch(n){return this.logger.warn("SensitiveDataFilter - could not transform title: ".concat(e,", ").concat(t)),t}}},{key:"filter",value:function(e){var t=this;if(this.logger.detailed("SensitiveDataFilter - filtering",{},(function(){return e})),!(0,h.isNavFullRequest)(e))return e.url.value=this.transformUrl(e.url.value),e;var n=function(e){e.url.value=t.transformUrl(e.url.value),e.contextAttributes.referrer=t.transformUrl(e.contextAttributes.referrer),e.pageAttributes.title=t.transformTitle((0,d.getDomain)(e.url.value),e.pageAttributes.title),e.pageAttributes.name=t.transformTitle((0,d.getDomain)(e.url.value),e.pageAttributes.name)};return n(e),e.nested.forEach(n),e}},{key:"syncUp",value:(e=p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.logger.log("SensitiveDataFilter - sync up rules: started"),e.next=4,this._filter.updateRules();case 4:this.logger.log("SensitiveDataFilter - sync up rules: done"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.logger.warn("SensitiveDataFilter - sync up rules: failed",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return e.apply(this,arguments)})}]);var e}();g=r([(0,a.injectable)(),o(0,(0,a.inject)(f.DiTypes.OPTIONS)),o(1,(0,a.inject)(f.DiTypes.LOGGER)),i("design:paramtypes",[Object,l.Logger])],g),t.SensitiveDataFilter=g},2037:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var a=n(6700),s=n(7809),f=n(6958),l=n(7002),d=n(3740),h=n(6478),g=n(732),b=n(1749),m=function(){return y((function e(t,n,r,i,o){v(this,e),this.fgNavManager=t,this.webNavManager=n,this.logger=r,this.options=i,this.taskManager=o}),[{key:"webNavigationBeforeNavigate",value:(b=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.logger.detailed("webNavigation.onBeforeNavigate",t,(function(){return t})),!(0,d.isMainFrame)(t.frameId)){e.next=6;break}return e.next=4,r.fgNavManager.webNavigationBeforeNavigate(t);case 4:e.next=8;break;case 6:return e.next=8,r.webNavManager.webNavigationBeforeNavigate(t);case 8:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"webNavigationComplete",value:(g=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.logger.detailed("webNavigation.onCompleted",t,(function(){return t})),!(0,d.isMainFrame)(t.frameId)){e.next=6;break}return e.next=4,r.fgNavManager.webNavigationComplete(t);case 4:e.next=8;break;case 6:return e.next=8,r.webNavManager.webNavigationComplete(t);case 8:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"webNavigationErrorOccurred",value:(h=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.logger.detailed("webNavigation.onRequestErrorOccurred",t,(function(){return t})),!(0,d.isMainFrame)(t.frameId)){e.next=6;break}return e.next=4,r.fgNavManager.webNavigationErrorOccurred(t);case 4:e.next=8;break;case 6:return e.next=8,r.webNavManager.webNavigationErrorOccurred(t);case 8:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"historyStateUpdated",value:(l=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.logger.detailed("webNavigation.onHistoryStateUpdated",t,(function(){return t})),e.next=3,r.fgNavManager.historyStateUpdated(t);case 3:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"webRequestHeadersSent",value:(f=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.logger.detailed("webRequest.onSendHeaders",t,(function(){return t})),!(0,d.isMainFrame)(t.frameId)){e.next=6;break}return e.next=4,r.fgNavManager.webRequestHeadersSent(t);case 4:e.next=8;break;case 6:return e.next=8,r.webNavManager.webRequestHeadersSent(t);case 8:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"webRequestHeadersReceived",value:(u=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.logger.detailed("webRequest.onHeadersReceived",t,(function(){return t})),!(0,d.isMainFrame)(t.frameId)){e.next=6;break}return e.next=4,r.fgNavManager.webRequestHeadersReceived(t);case 4:e.next=8;break;case 6:return e.next=8,r.webNavManager.webRequestHeadersReceived(t);case 8:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"webRequestResponseStarted",value:(s=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.logger.detailed("webRequest.onResponseStarted",t,(function(){return t})),e.t0=(0,d.isMainFrame)(t.frameId),e.t0){e.next=5;break}return e.next=5,r.webNavManager.webRequestResponseStarted(t);case 5:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"webRequestBeforeRedirect",value:(a=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.logger.detailed("webRequest.onBeforeRedirect",t,(function(){return t})),!(0,d.isMainFrame)(t.frameId)){e.next=6;break}return e.next=4,r.fgNavManager.webRequestBeforeRedirect(t);case 4:e.next=8;break;case 6:return e.next=8,r.webNavManager.webRequestBeforeRedirect(t);case 8:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"webRequestErrorOccurred",value:(o=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.logger.detailed("webRequest.onRequestErrorOccurred",t,(function(){return t})),e.t0=(0,d.isMainFrame)(t.frameId),e.t0){e.next=5;break}return e.next=5,r.webNavManager.webRequestErrorOccurred(t);case 5:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"createdNavigationTarget",value:(i=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.tabId),e.next=3,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.logger.detailed("webNavigation.onCreatedNavigationTarget",t,(function(){return t})),e.next=3,r.fgNavManager.createdNavigationTarget(t);case 3:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"tabCreated",value:(r=p(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t.id){e.next=2;break}return e.abrupt("return");case 2:return n="".concat(t.id),e.next=5,this.taskManager.exec(n,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.logger.detailed("tab.onTabCreated",{tabId:t.id,url:t.url},(function(){return t})),e.next=3,r.fgNavManager.tabCreated(t);case 3:case"end":return e.stop()}}),e)}))));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"tabRemoved",value:(n=p(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.taskManager.exec("".concat(t),p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.logger.detailed("tab.onTabRemoved",{tabId:t},(function(){return t}));case 1:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"tabUpdated",value:(t=p(c().mark((function e(t,n){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.taskManager.exec("".concat(t),p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.logger.detailed("tabs.onUpdated",{tabId:t},(function(){return n}));case 1:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"tabReplaced",value:(e=p(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.logger.log("tabs.onReplaced",{addedTabId:t,removedTabId:n});case 1:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})}]);var e,t,n,r,i,o,a,s,u,f,l,h,g,b}();r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"webNavigationBeforeNavigate",null),r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"webNavigationComplete",null),r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"webNavigationErrorOccurred",null),r([(0,b.libEnabled)(),(0,b.mainFrameOnly)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"historyStateUpdated",null),r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"webRequestHeadersSent",null),r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"webRequestHeadersReceived",null),r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"webRequestResponseStarted",null),r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"webRequestBeforeRedirect",null),r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"webRequestErrorOccurred",null),r([(0,b.libEnabled)(),(0,b.allowedUrlsOnly)(),(0,b.notPrerender)(),(0,b.isRealTabOnly)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"createdNavigationTarget",null),r([(0,b.libEnabled)(),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],m.prototype,"tabCreated",null),r([(0,b.libEnabled)(),i("design:type",Function),i("design:paramtypes",[Number]),i("design:returntype",Promise)],m.prototype,"tabRemoved",null),r([(0,b.libEnabled)(),i("design:type",Function),i("design:paramtypes",[Number,Object]),i("design:returntype",Promise)],m.prototype,"tabUpdated",null),r([(0,b.libEnabled)(),i("design:type",Function),i("design:paramtypes",[Number,Number]),i("design:returntype",Promise)],m.prototype,"tabReplaced",null),m=r([(0,a.injectable)(),o(0,(0,a.inject)(s.DiTypes.FG_NAV_MANAGER)),o(1,(0,a.inject)(s.DiTypes.WEB_NAV_MANAGER)),o(2,(0,a.inject)(s.DiTypes.LOGGER)),o(3,(0,a.inject)(s.DiTypes.OPTIONS)),o(4,(0,a.inject)(s.DiTypes.TASK_MANAGER)),i("design:paramtypes",[h.FgNavManager,g.WebNavManager,f.Logger,Object,l.TaskManager])],m),t.StreamManager=m},7002:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskManager=void 0;var i=n(6700),o=n(3740),a=function(){return y((function e(){v(this,e),this.scopes=new Map}),[{key:"exec",value:(t=p(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getScope(t),i=new Promise(function(){var e=p(c().mark((function e(t,i){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.tasks.push({fn:n,resolve:t,reject:i});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",(r.lock||(r.lock=!0,this.next(r).then()),i));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"next",value:(e=p(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=t.tasks.shift())){e.next=18;break}return e.prev=2,e.next=5,(0,o.delay)(0);case 5:return e.next=7,n.fn();case 7:r=e.sent,n.resolve(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n.reject(e.t0);case 14:return e.next=16,this.next(t);case 16:e.next=19;break;case 18:t.lock=!1;case 19:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(t){return e.apply(this,arguments)})},{key:"getScope",value:function(e){return this.scopes.has(e)||this.scopes.set(e,{tasks:[],lock:!1,id:e}),this.scopes.get(e)}}]);var e,t}();a=r([(0,i.injectable)()],a),t.TaskManager=a},732:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebNavManager=void 0;var a=n(6700),s=n(9362),f=n(7809),l=n(8028),d=n(855),h=n(6478),g=function(){return y((function e(t,n,r){v(this,e),this.storage=t,this.fgNavManager=n,this.dispatcher=r}),[{key:"webNavigationBeforeNavigate",value:(u=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tabId,r=t.frameId,e.next=4,this.storage.getOrCreate(n,r);case 4:return(i=e.sent).webNavigationBeforeNavigate=t,e.next=8,this.storage.save(i,r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"webNavigationComplete",value:(s=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tabId,r=t.frameId,e.next=4,this.storage.getOrCreate(n,r);case 4:if((i=e.sent).webNavigationComplete=t,null==i.webRequestHeadersSent){e.next=11;break}return e.next=9,this.finalize(i,r);case 9:e.next=13;break;case 11:return e.next=13,this.storage.remove(n,r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"webNavigationErrorOccurred",value:(a=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tabId,r=t.frameId,e.next=4,this.storage.getOrCreate(n,r);case 4:if(null==(i=e.sent).webRequestHeadersSent){e.next=11;break}return i.webNavigationErrorOccurred=t,e.next=9,this.finalize(i,r);case 9:e.next=13;break;case 11:return e.next=13,this.storage.remove(n,r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"webRequestBeforeRedirect",value:(o=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tabId,r=t.frameId,e.next=4,this.storage.getOrCreate(n,r);case 4:return(i=e.sent).webRequestBeforeRedirect=t,e.next=8,this.finalize(i,r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"webRequestErrorOccurred",value:(i=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tabId,r=t.frameId,e.next=4,this.storage.getOrCreate(n,r);case 4:return(i=e.sent).webRequestErrorOccurred=t,e.next=8,this.storage.save(i,r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"webRequestHeadersReceived",value:(r=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tabId,r=t.frameId,e.next=4,this.storage.getOrCreate(n,r);case 4:return(i=e.sent).webRequestHeadersReceived=t,e.next=8,this.storage.save(i,r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"webRequestHeadersSent",value:(n=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tabId,r=t.frameId,e.next=4,this.storage.getOrCreate(n,r);case 4:return(i=e.sent).webRequestHeadersSent=t,e.next=8,this.storage.save(i,r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"webRequestResponseStarted",value:(t=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tabId,r=t.frameId,e.next=4,this.storage.getOrCreate(n,r);case 4:return(i=e.sent).webRequestResponseStarted=t,e.next=8,this.storage.save(i,r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"finalize",value:(e=p(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.timestamp=Date.now(),e.next=3,this.fgNavManager.getInitiatorTabId(t.tabId);case 3:return t.initiatorTabId=e.sent,e.next=6,this.storage.remove(t.tabId,n);case 6:return r={name:l.EventList.WEB_NAV_CREATED,payload:t},e.next=9,this.dispatcher.emit(r);case 9:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})}]);var e,t,n,r,i,o,a,s,u}();g=r([(0,a.injectable)(),o(0,(0,a.inject)(f.DiTypes.WEB_NAV_STORAGE)),o(1,(0,a.inject)(f.DiTypes.FG_NAV_MANAGER)),o(2,(0,a.inject)(f.DiTypes.DISPATCHER)),i("design:paramtypes",[d.WebNavStorage,h.FgNavManager,s.Dispatcher])],g),t.WebNavManager=g},3921:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebNavProcessor=void 0;var a=n(6700),s=n(1067),f=n(7809),l=n(3436),d=n(4972),h=n(3740),g=n(9575),b=n(6657),m=n(3442),w=n(6797),_=n(6478),E=function(){return y((function e(t,n,r,i,o,a,s,u){v(this,e),this.storage=t,this.filter=n,this.bgBuilder=r,this.resBuilder=i,this.env=o,this.options=a,this.fgNavManager=s,this.script=u}),[{key:"process",value:(e=p(c().mark((function e(t){var n,r,i,o,a,s,u,f,l,d,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fgNavManager.getSequence(t.tabId);case 2:return s=e.sent,u=null===(n=t.webRequestHeadersSent)||void 0===n?void 0:n.frameId,f=(0,h.isMainFrame)(u)?"main_frame":"sub_frame",e.next=7,this.script.getPageData(t.tabId);case 7:return l=e.sent,this.bgBuilder.withUrl(null===(r=t.webRequestHeadersSent)||void 0===r?void 0:r.url).withRequestTab(t.tabId,t.initiatorTabId).withOS(this.env.getOS().name,this.env.getOS().version).withBrowser(this.env.getBrowser().name,this.env.getBrowser().version).withSequence(s).withFrame(u,null===(i=t.webRequestHeadersSent)||void 0===i?void 0:i.parentFrameId).withPanelistDef(this.options.panalyticsId,this.options.pinstanceId,this.options.partnerId,this.options.distributorId).withTimestamp("".concat(t.timestamp)).withHttpRequest(null===(o=t.webRequestHeadersSent)||void 0===o?void 0:o.method,(0,h.mapHeaders)(null===(a=t.webRequestHeadersSent)||void 0===a?void 0:a.requestHeaders)).withEventDef(m.Guid.create().toString(),(0,h.calcEventType)(f),f).withPageAttributes(l.title,l.name).withContextAttributes(l.referrer),this.processWebRequestHeadersReceived(t),this.processWebRequestBeforeRedirect(t),this.processWebRequestResponseStarted(t),this.processWebRequestErrorOccurred(t),d=this.resBuilder.make(),this.bgBuilder.withHttpResponse(d),p=this.bgBuilder.make(),e.next=14,this.storage.add(p);case 14:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"processWebRequestHeadersReceived",value:function(e){var t=this;null!=e.webRequestHeadersReceived&&(this.resBuilder.withStatusLine(e.webRequestHeadersReceived.statusLine).withStatusCode(e.webRequestHeadersReceived.statusCode),(0,h.mapHeaders)(e.webRequestHeadersReceived.responseHeaders).forEach((function(e){return t.resBuilder.addHeaders(e.name,e.value)})))}},{key:"processWebRequestBeforeRedirect",value:function(e){null!=e.webRequestBeforeRedirect&&(this.resBuilder.withRedirectUrl(e.webRequestBeforeRedirect.redirectUrl).withFromCache(e.webRequestBeforeRedirect.fromCache),this.bgBuilder.withServer(e.webRequestBeforeRedirect.ip))}},{key:"processWebRequestResponseStarted",value:function(e){null!=e.webRequestResponseStarted&&(this.resBuilder.withFromCache(e.webRequestResponseStarted.fromCache),this.bgBuilder.withServer(e.webRequestResponseStarted.ip))}},{key:"processWebRequestErrorOccurred",value:function(e){null!=e.webRequestErrorOccurred&&this.resBuilder.withError(e.webRequestErrorOccurred.error)}}]);var e}();E=r([(0,a.injectable)(),o(0,(0,a.inject)(f.DiTypes.BG_NAV_STORAGE)),o(1,(0,a.inject)(f.DiTypes.SENSITIVE_DATA_FILTER)),o(2,(0,a.inject)(f.DiTypes.BG_PAYLOAD_BUILDER)),o(3,(0,a.inject)(f.DiTypes.HTTP_RESPONSE_BUILDER)),o(4,(0,a.inject)(f.DiTypes.ENV)),o(5,(0,a.inject)(f.DiTypes.OPTIONS)),o(6,(0,a.inject)(f.DiTypes.FG_NAV_MANAGER)),o(7,(0,a.inject)(f.DiTypes.SCRIPT_MANAGER)),i("design:paramtypes",[w.BgNavStorage,s.SensitiveDataFilter,l.BgPayloadBuilder,b.HttpResponseBuilder,d.Env,Object,_.FgNavManager,g.ScriptManager])],E),t.WebNavProcessor=E},6797:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BgNavStorage=void 0;var a=n(6700),s=n(6074),f=n(7809),l=function(){return y((function e(t){v(this,e),this.compressor=t,this.key="__URL_SAFE_CHECK_BG_NAV__",this.cache=[],this.cacheSync=!1,this.storage=chrome.storage.local}),[{key:"add",value:(r=p(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.cacheSync,e.t0){e.next=4;break}return e.next=4,this.syncUp();case 4:return this.cache.push(t),n=JSON.stringify(this.cache),r=this.compressor.compress(n),i=d({},this.key,r),e.next=8,this.storage.set(i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"clean",value:(n=p(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.compressor.compress("[]"),n=d({},this.key,t),this.cache=[],e.next=4,this.storage.set(n);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getAll",value:(t=p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.cacheSync,e.t0){e.next=4;break}return e.next=4,this.syncUp();case 4:return e.abrupt("return",this.cache);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"syncUp",value:(e=p(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cacheSync=!0,e.next=3,this.storage.get(this.key);case 3:if(null!=(t=e.sent)[this.key])try{n=this.compressor.decompress(t[this.key]),this.cache=JSON.parse(n)}catch(e){this.cache=[]}case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t,n,r}();l=r([(0,a.injectable)(),o(0,(0,a.inject)(f.DiTypes.COMPRESSOR)),i("design:paramtypes",[s.Compressor])],l),t.BgNavStorage=l},8624:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FgNavStorage=void 0;var a=n(6700),s=n(647),f=n(7809),l=n(6074),h=function(){return y((function e(t){v(this,e),this.compressor=t,this.cache=new Map,this.storageTabKey="__URL_SAFE_CHECK_FG_NAV__",this.storage=chrome.storage.session}),[{key:"getOrCreate",value:(t=p(c().mark((function e(t){var n,r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(t)){e.next=2;break}return e.abrupt("return",this.cache.get(t));case 2:return n=this.key(t),e.next=5,this.storage.get(n);case 5:if(void 0===(r=e.sent)[n]){e.next=9;break}return i=this.compressor.decompress(r[n]),o=JSON.parse(i),e.abrupt("return",(this.cache.set(t,o),o));case 9:return a=this.createDefault(t),this.cache.set(t,a),s=JSON.stringify(a),u=d({},n,this.compressor.compress(s)),e.next=14,this.storage.set(u);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"save",value:(e=p(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.set(t.tabId,t),n=JSON.stringify(t),r=d({},this.key(t.tabId),this.compressor.compress(n)),e.next=4,this.storage.set(r);case 4:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"createDefault",value:function(e){return{tabId:e,method:s.NavigationMethod.INITIAL,status:s.NavigationStatus.INITIAL,sequence:0,pageData:{name:"",title:"",referrer:""}}}},{key:"key",value:function(e){return"".concat(this.storageTabKey,".").concat(e)}}]);var e,t}();h=r([(0,a.injectable)(),o(0,(0,a.inject)(f.DiTypes.COMPRESSOR)),i("design:paramtypes",[l.Compressor])],h),t.FgNavStorage=h},855:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebNavStorage=void 0;var a=n(6700),s=n(7809),f=n(6074),l=function(){return y((function e(t){v(this,e),this.compressor=t,this.cache=new Map,this.storageTabKey="__URL_SAFE_CHECK_WEB_NAV__",this.storage=chrome.storage.session}),[{key:"getOrCreate",value:(n=p(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.hash(t,n),!this.cache.has(r)){e.next=3;break}return e.abrupt("return",this.cache.get(r));case 3:return i=this.key(r),e.next=6,this.storage.get(i);case 6:if(void 0===(o=e.sent)[i]){e.next=10;break}return a=this.compressor.decompress(o[i]),s=JSON.parse(a),e.abrupt("return",(this.cache.set(r,s),s));case 10:return u={tabId:t},e.next=13,this.save(u,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"remove",value:(t=p(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.hash(t,n),this.cache.delete(r),i=this.key(r),e.next=5,this.storage.remove([i]);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"save",value:(e=p(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.hash(t.tabId,n),this.cache.set(r,t),i=this.key(r),o=JSON.stringify(t),a=d({},i,this.compressor.compress(o)),e.next=5,this.storage.set(a);case 5:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"key",value:function(e){return"".concat(this.storageTabKey,".").concat(e)}},{key:"hash",value:function(e,t){return"".concat(e,".").concat(t)}}]);var e,t,n}();l=r([(0,a.injectable)(),o(0,(0,a.inject)(s.DiTypes.COMPRESSOR)),i("design:paramtypes",[f.Compressor])],l),t.WebNavStorage=l},7027:function(n,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useStream=r.createStream=r.hasEnoughPermissions=r.getRequiredPermissions=void 0,i(8660);var o=i(8802),a=i(6700),s=i(7809),u=i(7002),f=i(9268),l=i(4972),h=i(2037),g=i(9575),b=i(6958),m=i(9362),w=i(8028),_=i(6074),E=i(1067),S=i(3003),O=i(3436),T=i(6657),A=i(9696),x=i(3740),N=i(6478),R=i(855),I=i(6797),k=i(3921),P=i(8624),C=i(2620),M=i(732);i(4991).SessionStorageAdapter.adapt();var j=new a.Container;j.bind(s.DiTypes.DI).toConstantValue(j),j.bind(s.DiTypes.DISPATCHER).to(m.Dispatcher).inSingletonScope();var D,L=[],B={urls:["https://*/*","http://*/*"],types:["main_frame","sub_frame"]};!function(e){e.INITIALIZATION_STARTED="INITIALIZATION_STARTED",e.INITIALIZATION_COMPLETED="INITIALIZATION_COMPLETED",e.STREAM_CREATED="STREAM_CREATED"}(D||(D={}));var G=d(d(d({},D.INITIALIZATION_STARTED,!1),D.INITIALIZATION_COMPLETED,!1),D.STREAM_CREATED,!1),F=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(G[D.STREAM_CREATED]){var i=j.get(s.DiTypes.STREAM_MANAGER);e.apply(void 0,[i].concat(n))}else L.push([e].concat(n))}};r.getRequiredPermissions=function(){return{permissions:["alarms","webRequest","webNavigation","scripting"],origins:["<all_urls>"]}},r.hasEnoughPermissions=p(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,r.getRequiredPermissions)(),e.abrupt("return",chrome.permissions.contains(t));case 2:case"end":return e.stop()}}),e)})));var U,q=function(){G[D.INITIALIZATION_STARTED]=!0,chrome.webRequest.onSendHeaders.addListener(F((function(e,t){e.webRequestHeadersSent(t)})),B,["requestHeaders"]),chrome.webRequest.onHeadersReceived.addListener(F((function(e,t){e.webRequestHeadersReceived(t)})),B,["responseHeaders"]),chrome.webRequest.onResponseStarted.addListener(F((function(e,t){e.webRequestResponseStarted(t)})),B,["responseHeaders"]),chrome.webNavigation.onBeforeNavigate.addListener(F((function(e,t){e.webNavigationBeforeNavigate(t)}))),chrome.webNavigation.onCompleted.addListener(F((function(e,t){e.webNavigationComplete(t)}))),chrome.webNavigation.onCreatedNavigationTarget.addListener(F((function(e,t){e.createdNavigationTarget(t)}))),chrome.webNavigation.onHistoryStateUpdated.addListener(F((function(e,t){e.historyStateUpdated(t)}))),chrome.webRequest.onErrorOccurred.addListener(F((function(e,t){e.webRequestErrorOccurred(t)})),B),chrome.webRequest.onBeforeRedirect.addListener(F((function(e,t){e.webRequestBeforeRedirect(t)})),B),chrome.webNavigation.onErrorOccurred.addListener(F((function(e,t){e.webNavigationErrorOccurred(t)}))),chrome.tabs.onCreated.addListener(F((function(e,t){e.tabCreated(t)}))),chrome.tabs.onRemoved.addListener(F((function(e,t){e.tabRemoved(t)}))),chrome.tabs.onReplaced.addListener(F((function(e,t,n){e.tabReplaced(t,n)}))),chrome.tabs.onUpdated.addListener(F((function(e,t,n){e.tabUpdated(t,n)})))},V=function(){var n=p(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,r.hasEnoughPermissions)();case 2:if(n.t0=n.sent,!n.t0){n.next=5;break}G[D.INITIALIZATION_STARTED]||q(),G[D.STREAM_CREATED]&&!G[D.INITIALIZATION_COMPLETED]&&p(c().mark((function n(){var r,i,a,u,f,l,d,h;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:G[D.INITIALIZATION_COMPLETED]=!0,r=j.get(s.DiTypes.OPTIONS),i={delayInMinutes:r.sensitiveRulesSyncUpIntervalInMin||1440,periodInMinutes:r.sensitiveRulesSyncUpIntervalInMin||1440},chrome.alarms.create(o.SyncUpSensitiveRulesAlarm,i),chrome.alarms.onAlarm.addListener((function(e){var t=j.get(s.DiTypes.SENSITIVE_DATA_FILTER);e.name===o.SyncUpSensitiveRulesAlarm&&t.syncUp()})),a=j.get(s.DiTypes.STREAM_MANAGER),u=0,f=L;case 5:if(!(u<f.length)){n.next=12;break}return l=t(f[u]),d=l[0],h=l.slice(1),n.next=9,d.apply(void 0,[a].concat(e(h)));case 9:u++,n.next=5;break;case 12:L=[];case 13:case"end":return n.stop()}}),n)})))();case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();q(),chrome.permissions.onAdded.addListener((function(){V()})),r.createStream=function(){var e=p(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=2;break}throw new Error("Stream is already created");case 2:return e.abrupt("return",U=new W(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.useStream=function(){if(null==U)throw new Error("Stream is not created");return U};var W=function(){return y((function e(t){v(this,e),this.options=t,j.bind(s.DiTypes.OPTIONS).toConstantValue(t),j.bind(s.DiTypes.TASK_MANAGER).to(u.TaskManager).inSingletonScope(),j.bind(s.DiTypes.HTTP_CLIENT).to(f.HttpClient).inSingletonScope(),j.bind(s.DiTypes.ENV).to(l.Env).inSingletonScope(),j.bind(s.DiTypes.LOGGER).to(b.Logger).inSingletonScope(),j.bind(s.DiTypes.STREAM_MANAGER).to(h.StreamManager).inSingletonScope(),j.bind(s.DiTypes.SCRIPT_MANAGER).to(g.ScriptManager).inSingletonScope(),j.bind(s.DiTypes.FG_PAYLOAD_BUILDER).to(S.FgPayloadBuilder).inSingletonScope(),j.bind(s.DiTypes.HTTP_RESPONSE_BUILDER).to(T.HttpResponseBuilder).inSingletonScope(),j.bind(s.DiTypes.COMPRESSOR).to(_.Compressor).inSingletonScope(),j.bind(s.DiTypes.SENSITIVE_DATA_FILTER).to(E.SensitiveDataFilter).inSingletonScope(),j.bind(s.DiTypes.CHECK_SAFETY_SERVICE).to(A.CheckSafetyService).inSingletonScope(),j.bind(s.DiTypes.WEB_NAV_PROCESSOR).to(k.WebNavProcessor).inSingletonScope(),j.bind(s.DiTypes.WEB_NAV_STORAGE).to(R.WebNavStorage).inSingletonScope(),j.bind(s.DiTypes.WEB_NAV_MANAGER).to(M.WebNavManager).inSingletonScope(),j.bind(s.DiTypes.FG_NAV_STORAGE).to(P.FgNavStorage).inSingletonScope(),j.bind(s.DiTypes.FG_NAV_MANAGER).to(N.FgNavManager).inSingletonScope(),j.bind(s.DiTypes.FG_NAV_PROCESSOR).to(C.FgNavProcessor).inSingletonScope(),j.bind(s.DiTypes.BG_PAYLOAD_BUILDER).to(O.BgPayloadBuilder).inSingletonScope(),j.bind(s.DiTypes.BG_NAV_STORAGE).to(I.BgNavStorage).inSingletonScope(),j.get(s.DiTypes.SENSITIVE_DATA_FILTER);var n=j.get(s.DiTypes.LOGGER),r=j.get(s.DiTypes.TASK_MANAGER),i=j.get(s.DiTypes.WEB_NAV_PROCESSOR),o=j.get(s.DiTypes.FG_NAV_PROCESSOR);globalThis[Symbol.for("__URL_SAFE_CHECK_OPTIONS__")]=this.options;var a="BLOCK";this.dispatcher=j.get(s.DiTypes.DISPATCHER),this.dispatcher.listen(w.EventList.WEB_NAV_CREATED,function(){var e=p(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.exec(a,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.process(t.payload);case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.dispatcher.listen(w.EventList.FG_NAV_COMPLETED,function(){var e=p(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.delay)(1200);case 2:r.exec(a,p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.process(t.payload);case 2:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.log("Lib version: v".concat(this.version())),G[D.STREAM_CREATED]=!0,V()}),[{key:"onPageVisited",value:function(e){this.dispatcher.listen(w.EventList.CHECK_URL_SAFETY_RESULT,function(){var t=p(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(n.payload.tabId,n.payload.url,n.payload.safe));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"enable",value:(i=p(c().mark((function e(){var t,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.hasEnoughPermissions)();case 2:if(e.sent){e.next=6;break}throw t=(0,r.getRequiredPermissions)(),n=function(e,t){return"".concat(e,', "').concat(t,'" ')},i=t.permissions.reduce(n,"Permissions: "),i=t.origins.reduce(n,"".concat(i,", host_permissions")),new Error("ClickStream: Don't have enough permissions. Please check a list: ".concat(i));case 6:return e.next=8,V();case 8:this.options.enabled=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"disable",value:(n=p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.options.enabled=!1;case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"isEnabled",value:(t=p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.options.enabled);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dataCollectionStatus",value:(e=p(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.options.enabled,!e.t0){e.next=5;break}return e.next=4,(0,r.hasEnoughPermissions)();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"version",value:function(){return(0,x.getLibVersion)()}}]);var e,t,n,i}()},8802:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncUpSensitiveRulesAlarm=void 0,t.SyncUpSensitiveRulesAlarm="__SyncUpSensitiveRulesAlarm__"},7327:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserVersionIgnoreLinter=void 0,t.getBrowserVersionIgnoreLinter=function(){var e,t="",n="0",r=navigator.userAgent+" ";if("5.0"==r.substring(r.indexOf("Mozilla/")+8,r.indexOf(" "))&&r.includes("like Gecko")){e=r.substring(r.indexOf("like Gecko")+10).substring(r.substring(r.indexOf("like Gecko")+10).indexOf(") ")+2).replace("LG Browser","LGBrowser").replace("360SE","360SE/");for(var i=0;i<1;i++)e=e.replace(e.substring(e.indexOf("("),e.indexOf(")")+1),"");e=e.split(" ");for(var o=0;o<e.length;o++)-1==e[o].indexOf("/")&&(e[o]="Chrome"),-1!=e[o].indexOf("/")&&(e[o]=e[o].substring(0,e[o].indexOf("/")));if(e.length<4)t=e[0];else for(var a=0;a<e.length;a++)-1==e[a].indexOf("Chrome")&&-1==e[a].indexOf("Safari")&&-1==e[a].indexOf("Mobile")&&-1==e[a].indexOf("Version")&&(t=e[a]);n=r.substring(r.indexOf(t)+t.length+1,r.indexOf(t)+t.length+1+r.substring(r.indexOf(t)+t.length+1).indexOf(" "))}else"5.0"==r.substring(r.indexOf("Mozilla/")+8,r.indexOf(" "))&&r.includes("Gecko/")?(t=r.substring(r.substring(r.indexOf("Gecko/")+6).indexOf(" ")+r.indexOf("Gecko/")+6).substring(0,r.substring(r.substring(r.indexOf("Gecko/")+6).indexOf(" ")+r.indexOf("Gecko/")+6).indexOf("/")),n=r.substring(r.indexOf(t)+t.length+1,r.indexOf(t)+t.length+1+r.substring(r.indexOf(t)+t.length+1).indexOf(" "))):"5.0"==r.substring(r.indexOf("Mozilla/")+8,r.indexOf(" "))&&r.includes("Clecko/")?(t=r.substring(r.substring(r.indexOf("Clecko/")+7).indexOf(" ")+r.indexOf("Clecko/")+7).substring(0,r.substring(r.substring(r.indexOf("Clecko/")+7).indexOf(" ")+r.indexOf("Clecko/")+7).indexOf("/")),n=r.substring(r.indexOf(t)+t.length+1,r.indexOf(t)+t.length+1+r.substring(r.indexOf(t)+t.length+1).indexOf(" "))):"5.0"==r.substring(r.indexOf("Mozilla/")+8,r.indexOf(" "))?(t=r.substring(r.indexOf("(")+1,r.indexOf(";")),n=r.substring(r.indexOf(t)+t.length+1,r.indexOf(t)+t.length+1+r.substring(r.indexOf(t)+t.length+1).indexOf(" "))):"4.0"==r.substring(r.indexOf("Mozilla/")+8,r.indexOf(" "))&&r.indexOf(")")+1==r.length-1?t=r.substring(r.indexOf("(")+1,r.indexOf(")")).split("; ")[r.substring(r.indexOf("(")+1,r.indexOf(")")).split("; ").length-1]:"4.0"==r.substring(r.indexOf("Mozilla/")+8,r.indexOf(" "))&&r.indexOf(")")+1!=r.length-1?(r.substring(r.indexOf(") ")+2).includes("/")&&(t=r.substring(r.indexOf(") ")+2,r.indexOf(") ")+2+r.substring(r.indexOf(") ")+2).indexOf("/"))),r.substring(r.indexOf(") ")+2).includes("/")||(t=r.substring(r.indexOf(") ")+2,r.indexOf(") ")+2+r.substring(r.indexOf(") ")+2).indexOf(" "))),n=r.substring(r.indexOf(t)+t.length+1,r.indexOf(t)+t.length+1+r.substring(r.indexOf(t)+t.length+1).indexOf(" "))):"Opera/"==r.substring(0,6)?(t="Opera",n=r.substring(r.indexOf(t)+t.length+1,r.indexOf(t)+t.length+1+r.substring(r.indexOf(t)+t.length+1).indexOf(" "))):"Mozilla"!=r.substring(0,r.indexOf("/"))&&"Opera"!=r.substring(0,r.indexOf("/"))?(t=r.substring(0,r.indexOf("/")),n=r.substring(r.indexOf(t)+t.length+1,r.indexOf(t)+t.length+1+r.substring(r.indexOf(t)+t.length+1).indexOf(" "))):t=r;return{name:t,version:n}}},8258:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOsVersionIgnoreLinter=void 0,t.getOsVersionIgnoreLinter=function(){var e,t=navigator.appVersion,n=navigator.userAgent,r="",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in i){var a=i[o];if(a.r.test(n)){r=a.s;break}}switch(r.includes("Windows")&&(e=/Windows (.*)/.exec(r)[1],r="Windows"),r){case"Mac OS X":var s=/Mac OS X ([\.\_\d]+)/.exec(n);e=null!=s?s[1]:"unknown";break;case"Android":e=/Android ([\.\_\d]+)/.exec(n)[1];break;case"iOS":e=(e=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+e[2]+"."+(0|e[3])}return{name:r,version:e}}},3162:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNavFullRequest=void 0,t.isNavFullRequest=function(e){return"pageAttributes"in e}},5708:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(n){return i(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return i(n,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,i,o,a={},s={},u="",c="",f="",l=2,d=3,h=2,p=[],v=0,g=0;for(o=0;o<e.length;o+=1)if(u=e.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=d++,s[u]=!0),c=f+u,Object.prototype.hasOwnProperty.call(a,c))f=c;else{if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,g==t-1?(g=0,p.push(n(v)),v=0):g++;for(i=f.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i=0;for(i=f.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}0==--l&&(l=Math.pow(2,h),h++),delete s[f]}else for(i=a[f],r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;0==--l&&(l=Math.pow(2,h),h++),a[c]=d++,f=String(u)}if(""!==f){if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,g==t-1?(g=0,p.push(n(v)),v=0):g++;for(i=f.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i=0;for(i=f.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}0==--l&&(l=Math.pow(2,h),h++),delete s[f]}else for(i=a[f],r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(i=2,r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;for(;;){if(v<<=1,g==t-1){p.push(n(v));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var i,o,a,s,u,c,f,l=[],d=4,h=4,p=3,v="",g=[],y={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)l[i]=i;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;f=e(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;f=e(a);break;case 2:return""}for(l[3]=f,o=f,g.push(f);;){if(y.index>t)return"";for(a=0,u=Math.pow(2,p),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;switch(f=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;l[h++]=e(a),f=h-1,d--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;l[h++]=e(a),f=h-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,p),p++),l[f])v=l[f];else{if(f!==h)return null;v=o+o.charAt(0)}g.push(v),l[h++]=o+v.charAt(0),o=v,0==--d&&(d=Math.pow(2,p),p++)}}};return o}();t.default=n},3740:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLibVersion=t.isRealTab=t.isPrerender=t.getDomain=t.delay=t.isAllowedUrl=t.getPageData=t.calcEventType=t.isMainFrame=t.mapHeaders=void 0;var r=n(5072);t.mapHeaders=function(e){return null==e?[]:e.map((function(e){return{name:e.name,value:e.value||""}}))},t.isMainFrame=function(e){return 0===e},t.calcEventType=function(e){return["main_frame","sub_frame"].includes(e)?r.EventType.MAIN:r.EventType.RESOURCE},t.getPageData=function(){return{name:window.name,title:document.title,referrer:document.referrer}},t.isAllowedUrl=function(e){for(var t=0,n=["http://","https://"];t<n.length;t++){var r=n[t];if(null!=e.match(r))return!0}return!1},t.delay=function(){var e=p(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getDomain=function(e){try{return new URL(e).host}catch(t){return e}},t.isPrerender=function(e){return"prerender"===e},t.isRealTab=function(e){return void 0!==e&&e>0},t.getLibVersion=function(){return"4.0.0"}},3960:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3190);t.default=r.default},1519:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=void 0,t.LocalStorage=function(){return y((function e(){v(this,e)}),null,[{key:"getItem",value:function(e){return chrome.storage.local.get(e).then((function(t){return t[e]}))}},{key:"setItem",value:function(e,t){chrome.storage.local.set(d({},e,t))}}])}()},3190:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1519),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null};return r(void 0,void 0,void 0,c().mark((function r(){var o,a,s,u,f;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.url,a=i(e,["url"]),s=new AbortController,u=setTimeout((function(){s.abort(),n()}),t),r.next=6,fetch(o,Object.assign(Object.assign({},a),{signal:s.signal}));case 6:return f=r.sent,r.abrupt("return",(clearTimeout(u),f));case 8:case"end":return r.stop()}}),r)})))};t.default=function(){return y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(this,e),this.storageSyncKey="panalyticsid",this.userKeyCacheHeader="X-PANEL-USER-KEY",this.userKeySymbolsCount=22,"string"!=typeof t.host)throw new Error("Server host is undefined");t.storageKey&&(this.storageSyncKey=t.storageKey),this.host=t.host,this.logging=!!t.logging,this.cacheResourceUrl=this.host+"/api/identity/cache",this.cookieResourceUrl=this.host+"/api/identity/cookie"}),[{key:"generateKey",value:function(){for(var e="",t=0;t<this.userKeySymbolsCount;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return this.log("key generated locally: "+e),e}},{key:"setKey",value:function(e){return r(this,void 0,void 0,c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.globalSetter(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"synchronize",value:function(){return r(this,void 0,void 0,c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadKey();case 2:return t=e.sent,e.next=5,this.globalSetter(t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"loadKey",value:function(){return r(this,void 0,void 0,c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return r(t,void 0,void 0,c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,t.t0){t.next=5;break}return t.next=4,this.cacheGetter();case 4:n=t.sent;case 5:if(t.t1=n,t.t1){t.next=10;break}return t.next=9,this.cookieGetter();case 9:n=t.sent;case 10:if(t.t2=n,t.t2){t.next=15;break}return t.next=14,this.localStorageGetter();case 14:n=t.sent;case 15:e(n);case 16:case"end":return t.stop()}}),t,this)})))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"getKey",value:function(e,t){this.getKeyAsync(t).then(e)}},{key:"getKeyAsync",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r(this,void 0,void 0,c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadKey();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=this.generateKey();case 5:if(n=t.t0,t.t1=e,!t.t1){t.next=10;break}return t.next=10,this.setKey(n);case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)})))}},{key:"localStorageGetter",value:function(){return r(this,void 0,void 0,c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("localStorageGetter: try to get "+this.storageSyncKey+" from localStorage."),e.next=3,o.LocalStorage.getItem(this.storageSyncKey);case 3:return t=e.sent,e.abrupt("return",(t?this.log("localStorageGetter: "+this.storageSyncKey+" has been found in localStorage. Value: "+t):this.log("localStorageGetter: "+this.storageSyncKey+" has not been found in localStorage."),t));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"localStorageSetter",value:function(e){this.log("localStorageSetter: "+this.storageSyncKey+" are going to be stored in localStorage."),o.LocalStorage.setItem(this.storageSyncKey,e)}},{key:"cacheGetter",value:function(){return r(this,void 0,void 0,c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("CacheGetter: try to get "+this.storageSyncKey+" from cache."),t=this,e.abrupt("return",new Promise((function(e){a({url:n.cacheResourceUrl,method:"GET"},1e3,(function(){t.log("CacheGetter: Caching request is timed out."),e()})).then((function(n){200===n.status?n.json().then((function(n){var r=n.userKey;r?(t.log("CacheGetter: "+t.storageSyncKey+" has been found in cache. Value: "+r),e(r)):e()})).catch((function(){t.log("CacheGetter: Error occurred while retrieving "+t.storageSyncKey+" from cache."),e()})):(t.log("CacheGetter: Caching request has been failed."),e())})).catch((function(){return e()}))})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"cacheSetter",value:function(e){var t=this;this.log("CacheSetter: "+this.storageSyncKey+" are going to be stored in cache.");var n=this;return new Promise((function(r){fetch(t.cacheResourceUrl,{headers:d(d({},t.userKeyCacheHeader,e),"Cache-Control","no-cache"),method:"GET"}).then((function(t){200===t.status?(n.log("CacheSetter: Caching request to server has been succeeded."),r(e)):(n.log("CacheSetter: Caching request has been failed."),r())})).catch((function(){return r()}))}))}},{key:"cookieGetter",value:function(){return r(this,void 0,void 0,c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("CookieGetter: try to get "+this.storageSyncKey+" from cookie."),t=this,e.abrupt("return",new Promise((function(e){a({credentials:"include",method:"GET",url:n.cookieResourceUrl},5e3,(function(){t.log("CookieGetter: Request is timed out."),e()})).then((function(n){var r;200===n.status?n.json().then((function(n){(r=n.userKey)?(t.log("CookieGetter: "+t.storageSyncKey+" has been found in cookie. Value:"+r),e(r)):(t.log("CookieGetter: "+t.storageSyncKey+" has not been found in cookie. "),e())})).catch((function(){t.log("CookieGetter: Error occurred while retrieving "+t.storageSyncKey+" from cookie."),e()})):(t.log("CookieGetter: Cookie request has been failed."),e())})).catch((function(){return e()}))})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"cookieSetter",value:function(e){var t=this;this.log("CookieSetter: "+this.storageSyncKey+" are going to be stored in cookie.");var n=this;return new Promise((function(r){fetch(t.cookieResourceUrl+"?userKey="+e,{credentials:"include",method:"POST"}).then((function(t){200===t.status?(n.log("CookieSetter: cookie request has been succeeded."),r(e)):(n.log("CookieSetter: cookie request has been failed."),r())})).catch((function(){return r()}))}))}},{key:"cookieClear",value:function(){return r(this,void 0,void 0,c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("CookieClearer: "+this.storageSyncKey+" are going to be deleted."),t=this,e.abrupt("return",new Promise((function(e){fetch(n.cookieResourceUrl,{credentials:"include",method:"DELETE"}).then((function(n){200===n.status?(t.log("CookieClearer: cookie request has been succeeded."),e()):(t.log("CookieClearer: cookie request has been failed."),e())})).catch((function(){return e()}))})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"globalSetter",value:function(e){return r(this,void 0,void 0,c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=10;break}return this.localStorageSetter(e),t.next=4,this.cacheSetter(e);case 4:return t.next=6,this.cookieClear();case 6:return t.next=8,this.cookieSetter(e);case 8:t.next=11;break;case 10:this.log("Value provided to global setter is invalid.");case 11:case"end":return t.stop()}}),t,this)})))}},{key:"log",value:function(e){this.logging&&console.log(e)}}])}()},707:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var o="*****",s="SensitiveDataFilter:";t.default=function(){return y((function e(t){if(v(this,e),"string"!=typeof t.host)throw"Server host is undefined";this.host=t.host,this.logging=!!t.logging}),[{key:"init",value:function(){return r(this,void 0,void 0,c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateRules();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"transformUrl",value:function(e){var t=this;if(!e||!this.rules||!this.rules.filters)return e;var n=new URL(e),r=n.host;n.password.length&&(n.password=o),n.username.length&&(n.username=o),this.rules.filters.forEach((function(e){r.match(e.domain)&&(n.pathname=t.processFilterRules(e.rules,n.pathname),n.search=t.processFilterRules(e.rules,n.search),n.hash=t.processFilterRules(e.rules,n.hash))}));var i=n.toString();return this.logging&&this.log("".concat(s," Transformed url: ").concat(e," -> ").concat(i)),i}},{key:"transformTitle",value:function(e,t){var n=this;if(!t||!this.rules||!this.rules.titles)return t;var r=this.rules.titles,i=t;return r.forEach((function(t){e.match(t.domain)&&t.rules.forEach((function(e){e.value&&(i=n.applyRegexp(e.value,i,o))}))})),this.logging&&this.log("".concat(s," Transformed title: ").concat(t," -> ").concat(i)),i}},{key:"updateRules",value:function(){return r(this,void 0,void 0,c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.host+"/api/privacy/data/rules/exclusions",e.prev=1,e.next=4,fetch(t,{headers:{"Content-type":"application/json;charset=utf-8"}});case 4:return n=e.sent,e.next=7,n.json();case 7:this.rules=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(1),new Error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})))}},{key:"processFilterRules",value:function(e,t){var n=this,r=t;return e.forEach((function(e){if(e.value&&e.type)switch(e.type){case"parameter":r=n.applyRegexp("([?&]"+e.value+"=)([^&]+)",r,"$1"+o);break;case"path":r=n.applyPathFilter(e.value,r,o);break;default:n.logging&&n.log("".concat(s," Unknown rule type: ").concat(e.type))}})),r}},{key:"applyPathFilter",value:function(e,t,r){var o,s=new RegExp(e,"i"),u=t.match(s);if(!u)return t;var c=function(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||a(e,t)||n()}(u,2),f=c[0],l=c[1];return o=r+l+r,0===f.indexOf(l)&&(o=l+r),f.indexOf(l)===f.length-l.length&&(o=r+l),t.replace(f,o)}},{key:"applyRegexp",value:function(e,t,n){var r=new RegExp(e,"ig");return t.replace(r,n)}},{key:"log",value:function(e){console.log(e)}}])}()},3442:function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.Guid=n},9934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagProperty=t.tagParameter=t.decorate=void 0;var r=n(6674),i=n(6867);function o(e,t,n,i,o){var a={},s="number"==typeof o,u=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var c=a[u];if(Array.isArray(c))for(var f=0,l=c;f<l.length;f++){var d=l[f];if(d.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+d.key.toString())}else c=[];c.push(i),a[u]=c,Reflect.defineMetadata(e,a,t)}function a(e,t){Reflect.decorate(e,t)}function s(e,t){return function(n,r){t(n,r,e)}}t.tagParameter=function(e,t,n,r){o(i.TAGGED,e,t,r,n)},t.tagProperty=function(e,t,n){o(i.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?a([s(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):a([e],t)}},5744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inject=t.LazyServiceIdentifer=void 0;var r=n(6674),i=n(6867),o=n(7738),a=n(9934),s=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=s,t.inject=function(e){return function(t,n,s){if(void 0===e)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(t.name));var u=new o.Metadata(i.INJECT_TAG,e);"number"==typeof s?a.tagParameter(t,n,s,u):a.tagProperty(t,n,u)}}},4315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=void 0;var r=n(6674),i=n(6867);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,e))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(i.PARAM_TYPES,t,e),e}}},1693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;var r=n(6867),i=n(7738),o=n(9934);t.multiInject=function(e){return function(t,n,a){var s=new i.Metadata(r.MULTI_INJECT_TAG,e);"number"==typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}},8085:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.named=void 0;var r=n(6867),i=n(7738),o=n(9934);t.named=function(e){return function(t,n,a){var s=new i.Metadata(r.NAMED_TAG,e);"number"==typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}},6515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;var r=n(6867),i=n(7738),o=n(9934);t.optional=function(){return function(e,t,n){var a=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,a):o.tagProperty(e,t,a)}}},7014:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;var r=n(6674),i=n(6867),o=n(7738);t.postConstruct=function(){return function(e,t,n){var a=new o.Metadata(i.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,e.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,a,e.constructor)}}},2052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=void 0;var r=n(7738),i=n(9934);t.tagged=function(e,t){return function(n,o,a){var s=new r.Metadata(e,t);"number"==typeof a?i.tagParameter(n,o,a,s):i.tagProperty(n,o,s)}}},5638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=void 0;var r=n(6867),i=n(7738),o=n(9934);t.targetName=function(e){return function(t,n,a){var s=new i.Metadata(r.NAME_TAG,e);o.tagParameter(t,n,a,s)}}},6757:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=void 0;var r=n(6867),i=n(7738),o=n(9934);t.unmanaged=function(){return function(e,t,n){var a=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,a)}}},4290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var r=n(8421),i=n(7791),o=function(){function e(e,t){this.id=i.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===r.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},3184:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0,t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},6674:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.POST_CONSTRUCT_ERROR=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.NOT_IMPLEMENTED=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.MISSING_INJECT_ANNOTATION=t.MISSING_INJECTABLE_ANNOTATION=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},8421:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0,t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},1389:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var a=n(4290),s=n(6674),c=n(8421),f=n(6867),l=n(1377),d=n(6311),h=n(1927),p=n(1860),v=n(7791),g=n(5800),y=n(5700),b=n(175),m=function(){function e(e){this._appliedMiddleware=[];var t=e||{};if("object"!=u(t))throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=c.BindingScopeEnum.Transient;else if(t.defaultScope!==c.BindingScopeEnum.Singleton&&t.defaultScope!==c.BindingScopeEnum.Transient&&t.defaultScope!==c.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=v.id(),this._bindingDictionary=new b.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new e,s=o([t,n],r).map((function(e){return d.getBindingDictionary(e)})),u=d.getBindingDictionary(a);return s.forEach((function(e){var t;t=u,e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))})),a},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,(function(){var t,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],a=t(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n,r=(n=t.id,function(e){return e.moduleId===n});e._bindingDictionary.removeByCondition(r)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||c.BindingScopeEnum.Transient,n=new a.Binding(e,t);return this._bindingDictionary.add(e,n),new p.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+g.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new b.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,f.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=d.createMockRequest(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(y.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._appliedMiddleware=this._appliedMiddleware.concat(e);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,c.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,c.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,f.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,c.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,c.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,f.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),this._appliedMiddleware.forEach((function(e){t.applyMiddleware(e)})),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t};return function(n){return{bindFunction:(i=n,function(n){var r=e.bind.bind(e)(n);return t(r,i),r}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:(r=n,function(n){var i=e.rebind.bind(e)(n);return t(i,r),i}),unbindFunction:function(t){e.unbind.bind(e)(t)}};var r,i}},e.prototype._get=function(e,t,n,r,i,o){var a=null,u={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(u)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(u);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=d.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),h.resolve(n)}},e}();t.Container=m},3244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;var r=n(7791);t.ContainerModule=function(e){this.id=r.id(),this.registry=e},t.AsyncContainerModule=function(e){this.id=r.id(),this.registry=e}},5700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;var n=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();t.ContainerSnapshot=n},175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;var r=n(6674),i=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(r.NULL_ARGUMENT);if(null==t)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(r.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,r){var i=n.filter((function(t){return!e(t)}));i.length>0?t._map.set(r,i):t._map.delete(r)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();t.Lookup=i},6700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=t.getServiceIdentifierAsString=t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=t.decorate=t.id=t.MetadataReader=t.postConstruct=t.targetName=t.multiInject=t.unmanaged=t.optional=t.LazyServiceIdentifer=t.inject=t.named=t.tagged=t.injectable=t.ContainerModule=t.AsyncContainerModule=t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=t.Container=t.METADATA_KEY=void 0;var r=n(6867);t.METADATA_KEY=r;var i=n(1389);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return i.Container}});var o=n(8421);Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return o.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return o.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return o.TargetTypeEnum}});var a=n(3244);Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var s=n(4315);Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return s.injectable}});var u=n(2052);Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return u.tagged}});var c=n(8085);Object.defineProperty(t,"named",{enumerable:!0,get:function(){return c.named}});var f=n(5744);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return f.inject}}),Object.defineProperty(t,"LazyServiceIdentifer",{enumerable:!0,get:function(){return f.LazyServiceIdentifer}});var l=n(6515);Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return l.optional}});var d=n(6757);Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return d.unmanaged}});var h=n(1693);Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return h.multiInject}});var p=n(5638);Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return p.targetName}});var v=n(7014);Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var g=n(1377);Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return g.MetadataReader}});var y=n(7791);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return y.id}});var b=n(9934);Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return b.decorate}});var m=n(758);Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return m.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return m.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return m.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return m.typeConstraint}});var w=n(5800);Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return w.getServiceIdentifierAsString}});var _=n(600);Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return _.multiBindToService}})},5228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=n(7791),i=function(){function e(e){this.id=r.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},7738:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(6867),i=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=i},1377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;var r=n(6867),i=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(r.TAGGED_PROP,e)||[]},e}();t.MetadataReader=i},5314:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0,t.Plan=function(e,t){this.parentContext=e,this.rootRequest=t}},6311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=t.createMockRequest=t.plan=void 0;var r=n(3184),i=n(6674),o=n(8421),a=n(6867),s=n(5265),u=n(5800),c=n(5228),f=n(7738),l=n(5314),d=n(6e3),h=n(6748),p=n(8924);function v(e){return e._bindingDictionary}function g(e,t,n,o,a){var s,c=b(n.container,a.serviceIdentifier);return c.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&e.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),c=b(n.container,a.serviceIdentifier)),s=t?c:c.filter((function(e){var t=new h.Request(e.serviceIdentifier,n,o,e,a);return e.constraint(t)})),function(e,t,n,o){switch(t.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var a=u.getServiceIdentifierAsString(e),s=i.NOT_REGISTERED;throw s+=u.listMetadataForTarget(a,n),s+=u.listRegisteredBindingsForServiceIdentifier(o,a,b),new Error(s);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;throw a=u.getServiceIdentifierAsString(e),s=i.AMBIGUOUS_MATCH+" "+a,s+=u.listRegisteredBindingsForServiceIdentifier(o,a,b),new Error(s)}}(a.serviceIdentifier,s,a,n.container),s}function y(e,t,n,r,a,s){var u,c;if(null===a){u=g(e,t,r,null,s),c=new h.Request(n,r,null,u,s);var f=new l.Plan(r,c);r.addPlan(f)}else u=g(e,t,r,a,s),c=a.addChildRequest(s.serviceIdentifier,u,s);u.forEach((function(t){var n=null;if(s.isArray())n=c.addChildRequest(t.serviceIdentifier,t,s);else{if(t.cache)return;n=c}if(t.type===o.BindingTypeEnum.Instance&&null!==t.implementationType){var a=d.getDependencies(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var u=d.getBaseClassDependencyCount(e,t.implementationType);if(a.length<u){var f=i.ARGUMENTS_LENGTH_MISMATCH(d.getFunctionName(t.implementationType));throw new Error(f)}}a.forEach((function(t){y(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function b(e,t){var n=[],r=v(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=b(e.parent,t)),n}t.getBindingDictionary=v,t.plan=function(e,t,n,r,i,o,l,d){void 0===d&&(d=!1);var h=new c.Context(t),v=function(e,t,n,r,i,o){var s=e?a.MULTI_INJECT_TAG:a.INJECT_TAG,u=new f.Metadata(s,n),c=new p.Target(t,"",n,u);if(void 0!==i){var l=new f.Metadata(i,o);c.metadata.push(l)}return c}(n,r,i,0,o,l);try{return y(e,d,i,h,null,v),h}catch(e){throw s.isStackOverflowExeption(e)&&h.plan&&u.circularDependencyToException(h.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,r){var i=new p.Target(o.TargetTypeEnum.Variable,"",t,new f.Metadata(n,r)),a=new c.Context(e);return new h.Request(t,a,null,[],i)}},8460:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryableString=void 0;var n=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=n},6e3:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=t.getBaseClassDependencyCount=t.getDependencies=void 0;var i=n(5744),o=n(6674),a=n(8421),s=n(6867),u=n(5800);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var c=n(8924);function f(e,t,n,i){var a=e.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var u=o.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(u)}var c=a.userGeneratedMetadata,f=Object.keys(c),h=0===n.length&&f.length>0,p=f.length>n.length,v=function(e,t,n,r,i){for(var o=[],a=0;a<i;a++){var s=l(a,e,t,n,r);null!==s&&o.push(s)}return o}(i,t,s,c,h||p?f.length:n.length),g=d(e,n);return r(r([],v),g)}function l(e,t,n,r,s){var u=s[e.toString()]||[],f=h(u),l=!0!==f.unmanaged,d=r[e];if((d=f.inject||f.multiInject||d)instanceof i.LazyServiceIdentifer&&(d=d.unwrap()),l){if(!t&&(d===Object||d===Function||void 0===d)){var p=o.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(p)}var v=new c.Target(a.TargetTypeEnum.ConstructorArgument,f.targetName,d);return v.metadata=u,v}return null}function d(e,t){for(var n=e.getPropertiesMetadata(t),i=[],o=0,s=Object.keys(n);o<s.length;o++){var u=s[o],f=n[u],l=h(n[u]),p=l.targetName||u,v=l.inject||l.multiInject,g=new c.Target(a.TargetTypeEnum.ClassProperty,p,v);g.metadata=f,i.push(g)}var y=Object.getPrototypeOf(t.prototype).constructor;if(y!==Object){var b=d(e,y);i=r(r([],i),b)}return i}function h(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[s.INJECT_TAG],multiInject:t[s.MULTI_INJECT_TAG],targetName:t[s.NAME_TAG],unmanaged:t[s.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return f(e,u.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=f(t,u.getFunctionName(r),r,!0),o=i.map((function(e){return e.metadata.filter((function(e){return e.key===s.UNMANAGED_TAG}))})),a=[].concat.apply([],o).length,c=i.length-a;return c>0?c:e(t,r)}return 0}},6748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var r=n(7791),i=function(){function e(e,t,n,i,o){this.id=r.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},8924:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;var r=n(6867),i=n(7791),o=n(7738),a=n(8460),s=function(){function e(e,t,n,s){this.id=i.id(),this.type=e,this.serviceIdentifier=n,this.name=new a.QueryableString(t||""),this.metadata=new Array;var u=null;"string"==typeof s?u=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++)if(n[t].key===e)return!0;return!1},e.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(r.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return r.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===r.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return r.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(r.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=s},2279:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=void 0;var i=n(6674),o=n(8421),a=n(6867);t.resolveInstance=function(e,t,n){var s,u,c=null;return t.length>0?(u=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ConstructorArgument})).map(n),c=function(e,t,n){var r=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(t,n){var r;r=t.target.name.value();var o=i[n];e[r]=o})),e}(c=new((s=e).bind.apply(s,r([void 0],u))),t,n)):c=new e,function(e,t){if(Reflect.hasMetadata(a.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,c),c}},1927:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var r=n(6674),i=n(8421),o=n(5265),a=n(5800),s=n(2279),u=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},c=function e(t){return function(n){n.parentContext.setCurrentRequest(n);var o=n.bindings,c=n.childRequests,f=n.target&&n.target.isArray(),l=!(n.parentRequest&&n.parentRequest.target&&n.target&&n.parentRequest.target.matchesArray(n.target.serviceIdentifier));if(f&&l)return c.map((function(n){return e(t)(n)}));var d=null;if(!n.target.isOptional()||0!==o.length){var h=o[0],p=h.scope===i.BindingScopeEnum.Singleton,v=h.scope===i.BindingScopeEnum.Request;if(p&&h.activated)return h.cache;if(v&&null!==t&&t.has(h.id))return t.get(h.id);if(h.type===i.BindingTypeEnum.ConstantValue)d=h.cache,h.activated=!0;else if(h.type===i.BindingTypeEnum.Function)d=h.cache,h.activated=!0;else if(h.type===i.BindingTypeEnum.Constructor)d=h.implementationType;else if(h.type===i.BindingTypeEnum.DynamicValue&&null!==h.dynamicValue)d=u("toDynamicValue",h.serviceIdentifier,(function(){return h.dynamicValue(n.parentContext)}));else if(h.type===i.BindingTypeEnum.Factory&&null!==h.factory)d=u("toFactory",h.serviceIdentifier,(function(){return h.factory(n.parentContext)}));else if(h.type===i.BindingTypeEnum.Provider&&null!==h.provider)d=u("toProvider",h.serviceIdentifier,(function(){return h.provider(n.parentContext)}));else{if(h.type!==i.BindingTypeEnum.Instance||null===h.implementationType){var g=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+g)}d=s.resolveInstance(h.implementationType,c,e(t))}return"function"==typeof h.onActivation&&(d=h.onActivation(n.parentContext,d)),p&&(h.cache=d,h.activated=!0),v&&null!==t&&!t.has(h.id)&&t.set(h.id,d),d}}};t.resolve=function(e){return c(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},3366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;var r=n(8421),i=n(1325),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},9812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;var r=n(3366),i=n(1811),o=n(8370),a=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=a},1811:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;var r=n(8370),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},1860:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;var r=n(6674),i=n(8421),o=n(9812),a=n(1325),s=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(r.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=s},1325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;var r=n(1811),i=n(8370),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},8370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;var r=n(1811),i=n(758),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=i.namedConstraint(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=i.taggedConstraint(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return i.typeConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return i.namedConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return i.taggedConstraint(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;var r=n(6867),i=n(7738);t.traverseAncerstors=function e(t,n){var r=t.parentRequest;return null!==r&&(!!n(r)||e(r,n))};var o=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new i.Metadata(e,t),n}};t.taggedConstraint=o;var a=o(r.NAMED_TAG);t.namedConstraint=a,t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}}},600:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=void 0,t.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}}},5265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStackOverflowExeption=void 0;var r=n(6674);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===r.STACK_OVERFLOW}},7791:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;var n=0;t.id=function(){return n++}},5800:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circularDependencyToException=t.listMetadataForTarget=t.listRegisteredBindingsForServiceIdentifier=t.getServiceIdentifierAsString=t.getFunctionName=void 0;var r=n(6674);function i(e){return"function"==typeof e?e.name:"symbol"==u(e)?e.toString():e}function o(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||o(e.parentRequest,t))}function a(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=i,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=a(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(o(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=a},8660:function(e,t,n){var r;!function(e){!function(t){var r="object"==u(n.g)?n.g:"object"==("undefined"==typeof self?"undefined":u(self))?self:"object"==u(this)?this:Function("return this;")(),i=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:i=o(r.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!o&&!a,c={create:o?function(){return j(Object.create(null))}:a?function(){return j({__proto__:null})}:function(){return j({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},f=Object.getPrototypeOf(Function),l="object"==("undefined"==typeof process?"undefined":u(process))&&"true"==="MISSING_ENV_VAR".REFLECT_METADATA_USE_MAP_POLYFILL,d=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function a(e,t){return[e,t]}}():Map,h=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,p=new(l||"function"!=typeof WeakMap?function(){var e=16,n=c.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+s()}while(c.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var t,n=(t=e,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t):a(new Array(t),t));n[6]=79&n[6]|64,n[8]=191&n[8]|128;for(var r="",i=0;i<e;++i){var o=n[i];4!==i&&6!==i&&8!==i||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}():WeakMap);function v(e,t,n){var r=p.get(e);if(O(r)){if(!n)return;r=new d,p.set(e,r)}var i=r.get(t);if(O(i)){if(!n)return;i=new d,r.set(t,i)}return i}function g(e,t,n){if(y(e,t,n))return!0;var r=M(t);return!T(r)&&g(e,r,n)}function y(e,t,n){var r=v(t,n,!1);return!O(r)&&!!r.has(e)}function b(e,t,n){if(y(e,t,n))return m(e,t,n);var r=M(t);return T(r)?void 0:b(e,r,n)}function m(e,t,n){var r=v(t,n,!1);if(!O(r))return r.get(e)}function w(e,t,n,r){v(n,r,!0).set(e,t)}function _(e,t){var n=E(e,t),r=M(e);if(null===r)return n;var i=_(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new h,a=[],s=0,u=n;s<u.length;s++){var c=u[s];o.has(c)||(o.add(c),a.push(c))}for(var f=0,l=i;f<l.length;f++)c=l[f],o.has(c)||(o.add(c),a.push(c));return a}function E(e,t){var n=[],r=v(e,t,!1);if(O(r))return n;for(var o=function(e){var t=k(e,i);if(!R(t))throw new TypeError;var n=t.call(e);if(!A(n))throw new TypeError;return n}(r.keys()),a=0;;){var s=P(o);if(!s)return n.length=a,n;var u=s.value;try{n[a]=u}catch(e){try{C(o)}finally{throw e}}a++}}function S(e){if(null===e)return 1;switch(u(e)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function O(e){return void 0===e}function T(e){return null===e}function A(e){return"object"==u(e)?null!==e:"function"==typeof e}function x(e){var t=function(e,t){switch(S(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n="string",i=k(e,r);if(void 0!==i){var o=i.call(e,n);if(A(o))throw new TypeError;return o}return function(e,t){var n,r,i=e.toString;if(R(i)&&!A(r=i.call(e)))return r;if(R(n=e.valueOf)&&!A(r=n.call(e)))return r;throw new TypeError}(e)}(e);return"symbol"==u(t)?t:function(e){return""+e}(t)}function N(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function R(e){return"function"==typeof e}function I(e){return"function"==typeof e}function k(e,t){var n=e[t];if(null!=n){if(!R(n))throw new TypeError;return n}}function P(e){var t=e.next();return!t.done&&t}function C(e){var t=e.return;t&&t.call(e)}function M(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===f)return t;if(t!==f)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function j(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(O(n)){if(!N(e))throw new TypeError;if(!I(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!O(r)&&!T(r)){if(!I(r))throw new TypeError;t=r}}return t}(e,t)}if(!N(e))throw new TypeError;if(!A(t))throw new TypeError;if(!A(r)&&!O(r)&&!T(r))throw new TypeError;return T(r)&&(r=void 0),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!O(o)&&!T(o)){if(!A(o))throw new TypeError;r=o}}return r}(e,t,n=x(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!A(n))throw new TypeError;if(!O(r)&&!function(e){switch(S(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;w(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!A(n))throw new TypeError;return O(r)||(r=x(r)),w(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!A(t))throw new TypeError;return O(n)||(n=x(n)),g(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!A(t))throw new TypeError;return O(n)||(n=x(n)),y(e,t,n)})),e("getMetadata",(function(e,t,n){if(!A(t))throw new TypeError;return O(n)||(n=x(n)),b(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!A(t))throw new TypeError;return O(n)||(n=x(n)),m(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!A(e))throw new TypeError;return O(t)||(t=x(t)),_(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!A(e))throw new TypeError;return O(t)||(t=x(t)),E(e,t)})),e("deleteMetadata",(function(e,t,n){if(!A(t))throw new TypeError;O(n)||(n=x(n));var r=v(t,n,!1);if(O(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=p.get(t);return i.delete(n),i.size>0||p.delete(t),!0}))}(i)}()}(r||(r={}))},6879:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(186),o=n(7027),a=n(3960),s=[];globalThis.safeBrowsing=function(){return new Promise((function(e){s.push(e)}))},globalThis.safeBrowsingHelper={hasEnoughPermissions:o.hasEnoughPermissions,getRequiredPermissions:o.getRequiredPermissions,drawBadge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"!";return r(this,void 0,void 0,c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.action.setBadgeText({text:e});case 2:case"end":return t.stop()}}),t)})))},resetBadge:function(){return r(this,void 0,void 0,c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.action.setBadgeText({text:""});case 2:case"end":return e.stop()}}),e)})))}};var u=function(){return r(void 0,void 0,void 0,c().mark((function e(){var t,n,r,u,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.hasEnoughPermissions)();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return t=new a.default({host:"https://id.sclpfybn.com",logging:!!Number("0")}),e.t0=Boolean,e.next=8,chrome.storage.local.get("POLICY_AGREEMENT");case 8:return e.t1=e.sent.POLICY_AGREEMENT,n=(0,e.t0)(e.t1),e.next=12,t.getKeyAsync();case 12:return r=e.sent,e.next=15,(0,o.createStream)({mode:"FULL_NAVIGATION",enabled:n||Boolean(Number("0")),apiUrl:"https://cs.sclpfybn.com/api/rest/v2",logging:Boolean(Number("0")),compressRequest:Boolean(Number("1")),distributorId:Number("391"),panalyticsId:r,partnerId:Number("391"),pinstanceId:Number("2"),sensitiveDataApiUrl:"https://id.sclpfybn.com",sensitiveDataCheckEnabled:Boolean(Number("1")),sensitiveRulesSyncUpIntervalInMin:720,sensitiveDataFilteringLogging:Boolean(Number("0"))});case 15:u=e.sent,f=new i.SafeBrowsingAPI(u),s.forEach((function(e){return e(f)})),globalThis.safeBrowsing=function(){return Promise.resolve(f)};case 18:case"end":return e.stop()}}),e)})))};u(),chrome.permissions.onAdded.addListener((function(){return u()}))},186:function(e,t){"use strict";var n,r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SafeBrowsingAPI=void 0,t.SafeBrowsingAPI=function(){return y((function e(t){var r=this;v(this,e),this.key="SAFESEARCH_ENABLED",n=t,chrome.storage.local.get(this.key).then((function(e){e[r.key]&&"1"===e[r.key]&&n.enable().then()}))}),[{key:"enable",value:function(){return r(this,void 0,void 0,c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.set(d({},this.key,"1"));case 2:return e.next=4,n.enable();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"disable",value:function(){return r(this,void 0,void 0,c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.set(d({},this.key,"0"));case 2:return e.next=4,n.disable();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"isEnabled",value:function(){return n.dataCollectionStatus()}},{key:"onPageVisited",value:function(e){n.onPageVisited((function(t,n,r){e({tabId:t,url:n,status:r})}))}}])}()}},s={};function f(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return r[e].call(n.exports,n,n.exports,f),n.exports}f.g=function(){if("object"==("undefined"==typeof globalThis?"undefined":u(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==("undefined"==typeof window?"undefined":u(window)))return window}}(),f(6879)}()},878:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var r=n(85),i=n(518),o=n(51);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=c(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(){f=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:N(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",v="suspendedYield",g="executing",y="completed",b={};function m(){}function w(){}function _(){}var E={};l(E,s,(function(){return this}));var S=Object.getPrototypeOf,O=S&&S(S(C([])));O&&O!==n&&r.call(O,s)&&(E=O);var T=_.prototype=m.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==a(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(l).then((function(e){f.value=e,s(f)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function N(t,n,r){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=R(s,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function R(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(a(t)+" is not iterable")}return w.prototype=_,i(T,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},A(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(T),l(T,c,"Generator"),l(T,s,(function(){return this})),l(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function l(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))}}function h(e){return p.apply(this,arguments)}function p(){return(p=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:!1===e.sent&&T(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return(g=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get([o.d.userAgreed,o.d.userAgreedV2,o.d.userAgreedV3,o.d.mellowtelEnabled,o.d.safeCheckerEnabled]);case 2:if(!0!==(t=e.sent)[o.d.safeCheckerEnabled]){e.next=5;break}return e.abrupt("return",!0);case 5:if(!t[o.d.userAgreedV2]||void 0!==t[o.d.safeCheckerEnabled]){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return b.apply(this,arguments)}function b(){return(b=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get([o.d.userAgreed,o.d.userAgreedV2,o.d.userAgreedV3,o.d.mellowtelEnabled,o.d.safeCheckerEnabled]);case 2:!(t=e.sent)[o.d.userAgreedV3]&&!t[o.d.userAgreedV2]&&t[o.d.userAgreed]&&t[o.d.mellowtelEnabled]&&(chrome.storage.local.set(s({},o.d.userAgreedV2,!0)),chrome.storage.local.remove(o.d.userAgreed)),!t[o.d.userAgreedV3]&&t[o.d.userAgreedV2]&&chrome.storage.local.set(s({},o.d.safeCheckerEnabled,!0));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return w.apply(this,arguments)}function w(){return(w=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get([o.d.userAgreedV2,o.d.userAgreedV3,o.d.safeCheckerEnabled]);case 2:if((t=e.sent)[o.d.userAgreedV3]||t[o.d.userAgreedV2]){e.next=6;break}return i.A.fireEvent("update_did_not_agree"),e.abrupt("return");case 6:if(!t[o.d.safeCheckerEnabled]){e.next=9;break}return i.A.fireEvent("update_checker_enabled"),e.abrupt("return");case 9:i.A.fireEvent("update_checker_disabled");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return E.apply(this,arguments)}function E(){return(E=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,globalThis.safeBrowsing();case 2:(t=e.sent).enable(),t.onPageVisited(S);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return O.apply(this,arguments)}function O(){return(O=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("UNSAFE"!==t.status){e.next=3;break}return chrome.tabs.sendMessage(t.tabId,{method:"unsafePageNotification"},(function(e){console.log("onPageVisitedCallback",e)})),e.abrupt("return");case 3:T(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=500,n="getEmails";e&&e.url&&(e.url.indexOf("bing.")>0&&(n="getEmailsBing"),e.url.indexOf("google.")>0&&e.url.indexOf("/search")>0&&(n="getEmailsGoogle",t=1e3),setTimeout(A,t,e.tabId?e.tabId:e.id,n))}function A(e,t){chrome.tabs.sendMessage(e,{method:t},(function(t){t&&t.data&&(x(t.data,e),(0,r.kG)(t.data))}))}function x(e,t){e&&0!==e.length?(chrome.action.setBadgeText({text:e.length.toString(),tabId:t}),chrome.action.setBadgeBackgroundColor({color:[255,0,0,255]})):chrome.action.setBadgeText({text:"",tabId:t})}n(375),!0===await v()&&_(),chrome.tabs.onUpdated.addListener((function(e,t,n){t&&t.status&&"complete"===t.status.toLowerCase()&&h(n)})),chrome.runtime.onMessage.addListener((function(e,t,n){return!(e&&(e.enableSafeChecker?(_(),0):e.disableSafeChecker&&(globalThis.safeBrowsing().then((function(e){return e.disable()})),0)))})),chrome.runtime.onInstalled.addListener((function(e){if("install"===e.reason)return chrome.storage.local.set({LS_DATE_INSTALL:this.gaCID}),void i.A.fireEvent("install");if("update"===e.reason){y(),m();var t=chrome.runtime.getManifest().version;if(i.A.fireEvent("update_from_"+e.previousVersion+"_to_"+t),t<=e.previousVersion)return;var n={.2:"",1.1:""}[t];n&&(r={type:"basic",iconUrl:"img/128.png",title:"Email Hunter update",message:n},chrome.notifications.create(NOTIFICATION_UPDATE,r))}var r})),t()}catch(N){t(N)}}),1)}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e](n,n.exports,a),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(i,o,a)=>{var s;a&&((s=[]).d=-1);var u,c,f,l=new Set,d=i.exports,h=new Promise(((e,t)=>{f=t,c=e}));h[t]=d,h[e]=e=>(s&&e(s),l.forEach(e),h.catch((e=>{}))),i.exports=h,o((i=>{var o;u=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var o=[];o.d=0,i.then((e=>{a[t]=e,r(o)}),(e=>{a[n]=e,r(o)}));var a={};return a[e]=e=>e(o),a}}var s={};return s[e]=e=>{},s[t]=i,s})))(i);var a=()=>u.map((e=>{if(e[n])throw e[n];return e[t]})),c=new Promise((t=>{(o=()=>t(a)).r=0;var n=e=>e!==s&&!l.has(e)&&(l.add(e),e&&!e.d&&(o.r++,e.push(o)));u.map((t=>t[e](n)))}));return o.r?c:a()}),(e=>(e?f(h[n]=e):c(d),r(s)))),s&&s.d<0&&(s.d=0)},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(878)})();